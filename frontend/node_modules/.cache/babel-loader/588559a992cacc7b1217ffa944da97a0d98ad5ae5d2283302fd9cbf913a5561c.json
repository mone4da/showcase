{"ast":null,"code":"import _classCallCheck from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Object3D } from 'three';\nimport { XRHandPrimitiveModel } from './XRHandPrimitiveModel.js';\nimport { XRHandMeshModel } from './XRHandMeshModel.js';\nvar XRHandModel = /*#__PURE__*/function (_Object3D) {\n  _inherits(XRHandModel, _Object3D);\n  var _super = _createSuper(XRHandModel);\n  function XRHandModel(controller) {\n    var _this;\n    _classCallCheck(this, XRHandModel);\n    _this = _super.call(this);\n    _this.controller = controller;\n    _this.motionController = null;\n    _this.envMap = null;\n    _this.mesh = null;\n    return _this;\n  }\n  _createClass(XRHandModel, [{\n    key: \"updateMatrixWorld\",\n    value: function updateMatrixWorld(force) {\n      _get(_getPrototypeOf(XRHandModel.prototype), \"updateMatrixWorld\", this).call(this, force);\n      if (this.motionController) {\n        this.motionController.updateMesh();\n      }\n    }\n  }]);\n  return XRHandModel;\n}(Object3D);\nvar XRHandModelFactory = /*#__PURE__*/function () {\n  function XRHandModelFactory() {\n    _classCallCheck(this, XRHandModelFactory);\n    this.path = null;\n  }\n  _createClass(XRHandModelFactory, [{\n    key: \"setPath\",\n    value: function setPath(path) {\n      this.path = path;\n      return this;\n    }\n  }, {\n    key: \"createHandModel\",\n    value: function createHandModel(controller, profile) {\n      var _this2 = this;\n      var handModel = new XRHandModel(controller);\n      controller.addEventListener('connected', function (event) {\n        var xrInputSource = event.data;\n        if (xrInputSource.hand && !handModel.motionController) {\n          handModel.xrInputSource = xrInputSource; // @todo Detect profile if not provided\n\n          if (profile === undefined || profile === 'spheres') {\n            handModel.motionController = new XRHandPrimitiveModel(handModel, controller, _this2.path, xrInputSource.handedness, {\n              primitive: 'sphere'\n            });\n          } else if (profile === 'boxes') {\n            handModel.motionController = new XRHandPrimitiveModel(handModel, controller, _this2.path, xrInputSource.handedness, {\n              primitive: 'box'\n            });\n          } else if (profile === 'mesh') {\n            handModel.motionController = new XRHandMeshModel(handModel, controller, _this2.path, xrInputSource.handedness);\n          }\n        }\n      });\n      controller.addEventListener('disconnected', function () {// handModel.motionController = null;\n        // handModel.remove( scene );\n        // scene = null;\n      });\n      return handModel;\n    }\n  }]);\n  return XRHandModelFactory;\n}();\nexport { XRHandModelFactory };","map":{"version":3,"names":["Object3D","XRHandPrimitiveModel","XRHandMeshModel","XRHandModel","_Object3D","_inherits","_super","_createSuper","controller","_this","_classCallCheck","call","motionController","envMap","mesh","_createClass","key","value","updateMatrixWorld","force","_get","_getPrototypeOf","prototype","updateMesh","XRHandModelFactory","path","setPath","createHandModel","profile","_this2","handModel","addEventListener","event","xrInputSource","data","hand","undefined","handedness","primitive"],"sources":["/home/samuel/experiment/3d/farm/frontend/node_modules/three-stdlib/webxr/XRHandModelFactory.js"],"sourcesContent":["import { Object3D } from 'three';\nimport { XRHandPrimitiveModel } from './XRHandPrimitiveModel.js';\nimport { XRHandMeshModel } from './XRHandMeshModel.js';\n\nclass XRHandModel extends Object3D {\n  constructor(controller) {\n    super();\n    this.controller = controller;\n    this.motionController = null;\n    this.envMap = null;\n    this.mesh = null;\n  }\n\n  updateMatrixWorld(force) {\n    super.updateMatrixWorld(force);\n\n    if (this.motionController) {\n      this.motionController.updateMesh();\n    }\n  }\n\n}\n\nclass XRHandModelFactory {\n  constructor() {\n    this.path = null;\n  }\n\n  setPath(path) {\n    this.path = path;\n    return this;\n  }\n\n  createHandModel(controller, profile) {\n    const handModel = new XRHandModel(controller);\n    controller.addEventListener('connected', event => {\n      const xrInputSource = event.data;\n\n      if (xrInputSource.hand && !handModel.motionController) {\n        handModel.xrInputSource = xrInputSource; // @todo Detect profile if not provided\n\n        if (profile === undefined || profile === 'spheres') {\n          handModel.motionController = new XRHandPrimitiveModel(handModel, controller, this.path, xrInputSource.handedness, {\n            primitive: 'sphere'\n          });\n        } else if (profile === 'boxes') {\n          handModel.motionController = new XRHandPrimitiveModel(handModel, controller, this.path, xrInputSource.handedness, {\n            primitive: 'box'\n          });\n        } else if (profile === 'mesh') {\n          handModel.motionController = new XRHandMeshModel(handModel, controller, this.path, xrInputSource.handedness);\n        }\n      }\n    });\n    controller.addEventListener('disconnected', () => {// handModel.motionController = null;\n      // handModel.remove( scene );\n      // scene = null;\n    });\n    return handModel;\n  }\n\n}\n\nexport { XRHandModelFactory };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}