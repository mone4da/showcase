{"ast":null,"code":"import _classCallCheck from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Loader, FileLoader, LineBasicMaterial, Group, Euler, BufferGeometry, Float32BufferAttribute, LineSegments } from 'three';\n\n/**\n * GCodeLoader is used to load gcode files usually used for 3D printing or CNC applications.\n *\n * Gcode files are composed by commands used by machines to create objects.\n *\n * @class GCodeLoader\n * @param {Manager} manager Loading manager.\n */\nvar GCodeLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(GCodeLoader, _Loader);\n  var _super = _createSuper(GCodeLoader);\n  function GCodeLoader(manager) {\n    var _this;\n    _classCallCheck(this, GCodeLoader);\n    _this = _super.call(this, manager);\n    _this.splitLayer = false;\n    return _this;\n  }\n  _createClass(GCodeLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var loader = new FileLoader(scope.manager);\n      loader.setPath(scope.path);\n      loader.setRequestHeader(scope.requestHeader);\n      loader.setWithCredentials(scope.withCredentials);\n      loader.load(url, function (text) {\n        try {\n          onLoad(scope.parse(text));\n        } catch (e) {\n          if (onError) {\n            onError(e);\n          } else {\n            console.error(e);\n          }\n          scope.manager.itemError(url);\n        }\n      }, onProgress, onError);\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(data) {\n      var state = {\n        x: 0,\n        y: 0,\n        z: 0,\n        e: 0,\n        f: 0,\n        extruding: false,\n        relative: false\n      };\n      var layers = [];\n      var currentLayer = undefined;\n      var pathMaterial = new LineBasicMaterial({\n        color: 0xff0000\n      });\n      pathMaterial.name = 'path';\n      var extrudingMaterial = new LineBasicMaterial({\n        color: 0x00ff00\n      });\n      extrudingMaterial.name = 'extruded';\n      function newLayer(line) {\n        currentLayer = {\n          vertex: [],\n          pathVertex: [],\n          z: line.z\n        };\n        layers.push(currentLayer);\n      } //Create lie segment between p1 and p2\n\n      function addSegment(p1, p2) {\n        if (currentLayer === undefined) {\n          newLayer(p1);\n        }\n        if (state.extruding) {\n          currentLayer.vertex.push(p1.x, p1.y, p1.z);\n          currentLayer.vertex.push(p2.x, p2.y, p2.z);\n        } else {\n          currentLayer.pathVertex.push(p1.x, p1.y, p1.z);\n          currentLayer.pathVertex.push(p2.x, p2.y, p2.z);\n        }\n      }\n      function delta(v1, v2) {\n        return state.relative ? v2 : v2 - v1;\n      }\n      function absolute(v1, v2) {\n        return state.relative ? v1 + v2 : v2;\n      }\n      var lines = data.replace(/;.+/g, '').split('\\n');\n      var _loop = function _loop() {\n        var tokens = lines[i].split(' ');\n        var cmd = tokens[0].toUpperCase(); //Argumments\n\n        var args = {};\n        tokens.splice(1).forEach(function (token) {\n          if (token[0] !== undefined) {\n            var key = token[0].toLowerCase();\n            var value = parseFloat(token.substring(1));\n            args[key] = value;\n          }\n        }); //Process commands\n        //G0/G1 – Linear Movement\n\n        if (cmd === 'G0' || cmd === 'G1') {\n          var line = {\n            x: args.x !== undefined ? absolute(state.x, args.x) : state.x,\n            y: args.y !== undefined ? absolute(state.y, args.y) : state.y,\n            z: args.z !== undefined ? absolute(state.z, args.z) : state.z,\n            e: args.e !== undefined ? absolute(state.e, args.e) : state.e,\n            f: args.f !== undefined ? absolute(state.f, args.f) : state.f\n          }; //Layer change detection is or made by watching Z, it's made by watching when we extrude at a new Z position\n\n          if (delta(state.e, line.e) > 0) {\n            line.extruding = delta(state.e, line.e) > 0;\n            if (currentLayer == undefined || line.z != currentLayer.z) {\n              newLayer(line);\n            }\n          }\n          addSegment(state, line);\n          state = line;\n        } else if (cmd === 'G2' || cmd === 'G3') ;else if (cmd === 'G90') {\n          //G90: Set to Absolute Positioning\n          state.relative = false;\n        } else if (cmd === 'G91') {\n          //G91: Set to state.relative Positioning\n          state.relative = true;\n        } else if (cmd === 'G92') {\n          //G92: Set Position\n          var _line = state;\n          _line.x = args.x !== undefined ? args.x : _line.x;\n          _line.y = args.y !== undefined ? args.y : _line.y;\n          _line.z = args.z !== undefined ? args.z : _line.z;\n          _line.e = args.e !== undefined ? args.e : _line.e;\n          state = _line;\n        } else ;\n      };\n      for (var i = 0; i < lines.length; i++) {\n        _loop();\n      }\n      function addObject(vertex, extruding, i) {\n        var geometry = new BufferGeometry();\n        geometry.setAttribute('position', new Float32BufferAttribute(vertex, 3));\n        var segments = new LineSegments(geometry, extruding ? extrudingMaterial : pathMaterial);\n        segments.name = 'layer' + i;\n        object.add(segments);\n      }\n      var object = new Group();\n      object.name = 'gcode';\n      if (this.splitLayer) {\n        for (var _i = 0; _i < layers.length; _i++) {\n          var layer = layers[_i];\n          addObject(layer.vertex, true, _i);\n          addObject(layer.pathVertex, false, _i);\n        }\n      } else {\n        var vertex = [],\n          pathVertex = [];\n        for (var _i2 = 0; _i2 < layers.length; _i2++) {\n          var _layer = layers[_i2];\n          var layerVertex = _layer.vertex;\n          var layerPathVertex = _layer.pathVertex;\n          for (var j = 0; j < layerVertex.length; j++) {\n            vertex.push(layerVertex[j]);\n          }\n          for (var _j = 0; _j < layerPathVertex.length; _j++) {\n            pathVertex.push(layerPathVertex[_j]);\n          }\n        }\n        addObject(vertex, true, layers.length);\n        addObject(pathVertex, false, layers.length);\n      }\n      object.quaternion.setFromEuler(new Euler(-Math.PI / 2, 0, 0));\n      return object;\n    }\n  }]);\n  return GCodeLoader;\n}(Loader);\nexport { GCodeLoader };","map":{"version":3,"names":["Loader","FileLoader","LineBasicMaterial","Group","Euler","BufferGeometry","Float32BufferAttribute","LineSegments","GCodeLoader","_Loader","_inherits","_super","_createSuper","manager","_this","_classCallCheck","call","splitLayer","_createClass","key","value","load","url","onLoad","onProgress","onError","scope","loader","setPath","path","setRequestHeader","requestHeader","setWithCredentials","withCredentials","text","parse","e","console","error","itemError","data","state","x","y","z","f","extruding","relative","layers","currentLayer","undefined","pathMaterial","color","name","extrudingMaterial","newLayer","line","vertex","pathVertex","push","addSegment","p1","p2","delta","v1","v2","absolute","lines","replace","split","_loop","tokens","i","cmd","toUpperCase","args","splice","forEach","token","toLowerCase","parseFloat","substring","length","addObject","geometry","setAttribute","segments","object","add","layer","layerVertex","layerPathVertex","j","quaternion","setFromEuler","Math","PI"],"sources":["/home/samuel/experiment/3d/farm/frontend/node_modules/three-stdlib/loaders/GCodeLoader.js"],"sourcesContent":["import { Loader, FileLoader, LineBasicMaterial, Group, Euler, BufferGeometry, Float32BufferAttribute, LineSegments } from 'three';\n\n/**\n * GCodeLoader is used to load gcode files usually used for 3D printing or CNC applications.\n *\n * Gcode files are composed by commands used by machines to create objects.\n *\n * @class GCodeLoader\n * @param {Manager} manager Loading manager.\n */\n\nclass GCodeLoader extends Loader {\n  constructor(manager) {\n    super(manager);\n    this.splitLayer = false;\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new FileLoader(scope.manager);\n    loader.setPath(scope.path);\n    loader.setRequestHeader(scope.requestHeader);\n    loader.setWithCredentials(scope.withCredentials);\n    loader.load(url, function (text) {\n      try {\n        onLoad(scope.parse(text));\n      } catch (e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        scope.manager.itemError(url);\n      }\n    }, onProgress, onError);\n  }\n\n  parse(data) {\n    let state = {\n      x: 0,\n      y: 0,\n      z: 0,\n      e: 0,\n      f: 0,\n      extruding: false,\n      relative: false\n    };\n    let layers = [];\n    let currentLayer = undefined;\n    const pathMaterial = new LineBasicMaterial({\n      color: 0xff0000\n    });\n    pathMaterial.name = 'path';\n    const extrudingMaterial = new LineBasicMaterial({\n      color: 0x00ff00\n    });\n    extrudingMaterial.name = 'extruded';\n\n    function newLayer(line) {\n      currentLayer = {\n        vertex: [],\n        pathVertex: [],\n        z: line.z\n      };\n      layers.push(currentLayer);\n    } //Create lie segment between p1 and p2\n\n\n    function addSegment(p1, p2) {\n      if (currentLayer === undefined) {\n        newLayer(p1);\n      }\n\n      if (state.extruding) {\n        currentLayer.vertex.push(p1.x, p1.y, p1.z);\n        currentLayer.vertex.push(p2.x, p2.y, p2.z);\n      } else {\n        currentLayer.pathVertex.push(p1.x, p1.y, p1.z);\n        currentLayer.pathVertex.push(p2.x, p2.y, p2.z);\n      }\n    }\n\n    function delta(v1, v2) {\n      return state.relative ? v2 : v2 - v1;\n    }\n\n    function absolute(v1, v2) {\n      return state.relative ? v1 + v2 : v2;\n    }\n\n    let lines = data.replace(/;.+/g, '').split('\\n');\n\n    for (let i = 0; i < lines.length; i++) {\n      let tokens = lines[i].split(' ');\n      let cmd = tokens[0].toUpperCase(); //Argumments\n\n      let args = {};\n      tokens.splice(1).forEach(function (token) {\n        if (token[0] !== undefined) {\n          let key = token[0].toLowerCase();\n          let value = parseFloat(token.substring(1));\n          args[key] = value;\n        }\n      }); //Process commands\n      //G0/G1 – Linear Movement\n\n      if (cmd === 'G0' || cmd === 'G1') {\n        let line = {\n          x: args.x !== undefined ? absolute(state.x, args.x) : state.x,\n          y: args.y !== undefined ? absolute(state.y, args.y) : state.y,\n          z: args.z !== undefined ? absolute(state.z, args.z) : state.z,\n          e: args.e !== undefined ? absolute(state.e, args.e) : state.e,\n          f: args.f !== undefined ? absolute(state.f, args.f) : state.f\n        }; //Layer change detection is or made by watching Z, it's made by watching when we extrude at a new Z position\n\n        if (delta(state.e, line.e) > 0) {\n          line.extruding = delta(state.e, line.e) > 0;\n\n          if (currentLayer == undefined || line.z != currentLayer.z) {\n            newLayer(line);\n          }\n        }\n\n        addSegment(state, line);\n        state = line;\n      } else if (cmd === 'G2' || cmd === 'G3') ; else if (cmd === 'G90') {\n        //G90: Set to Absolute Positioning\n        state.relative = false;\n      } else if (cmd === 'G91') {\n        //G91: Set to state.relative Positioning\n        state.relative = true;\n      } else if (cmd === 'G92') {\n        //G92: Set Position\n        let line = state;\n        line.x = args.x !== undefined ? args.x : line.x;\n        line.y = args.y !== undefined ? args.y : line.y;\n        line.z = args.z !== undefined ? args.z : line.z;\n        line.e = args.e !== undefined ? args.e : line.e;\n        state = line;\n      } else ;\n    }\n\n    function addObject(vertex, extruding, i) {\n      let geometry = new BufferGeometry();\n      geometry.setAttribute('position', new Float32BufferAttribute(vertex, 3));\n      let segments = new LineSegments(geometry, extruding ? extrudingMaterial : pathMaterial);\n      segments.name = 'layer' + i;\n      object.add(segments);\n    }\n\n    const object = new Group();\n    object.name = 'gcode';\n\n    if (this.splitLayer) {\n      for (let i = 0; i < layers.length; i++) {\n        let layer = layers[i];\n        addObject(layer.vertex, true, i);\n        addObject(layer.pathVertex, false, i);\n      }\n    } else {\n      const vertex = [],\n            pathVertex = [];\n\n      for (let i = 0; i < layers.length; i++) {\n        let layer = layers[i];\n        let layerVertex = layer.vertex;\n        let layerPathVertex = layer.pathVertex;\n\n        for (let j = 0; j < layerVertex.length; j++) {\n          vertex.push(layerVertex[j]);\n        }\n\n        for (let j = 0; j < layerPathVertex.length; j++) {\n          pathVertex.push(layerPathVertex[j]);\n        }\n      }\n\n      addObject(vertex, true, layers.length);\n      addObject(pathVertex, false, layers.length);\n    }\n\n    object.quaternion.setFromEuler(new Euler(-Math.PI / 2, 0, 0));\n    return object;\n  }\n\n}\n\nexport { GCodeLoader };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}