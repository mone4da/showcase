{"ast":null,"code":"import _slicedToArray from\"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{OrbitControls,PerspectiveCamera}from'@react-three/drei';import{useState}from'react';import useKeyboard from'./useKeyboard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var control={target:[0,.35,0],angle:1.45};var camera={fov:50,position:[3,2,5]};var space=[4,1,4];var material={color:'#00FF00'};var Wall=function Wall(props){var x=props.x,h=props.h,z=props.z;return/*#__PURE__*/_jsxs(\"mesh\",{position:[x,0,z],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[1,.4*h,1]}),/*#__PURE__*/_jsx(\"meshBasicMaterial\",{color:h?'green':'black'})]});};var Target=function Target(props){var data=props.data;return/*#__PURE__*/_jsxs(\"mesh\",{position:[data.position.x,0,data.position.z],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[.3,.3,.3]}),/*#__PURE__*/_jsx(\"meshBasicMaterial\",{color:data.material.color})]});};var Player=function Player(props){var data=props.data;return/*#__PURE__*/_jsxs(\"mesh\",{position:[data.position.x,0,data.position.z],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[.3,.3,.3]}),/*#__PURE__*/_jsx(\"meshBasicMaterial\",{color:data.material.color})]});};var Chicken=function Chicken(props){var data=props.data;return/*#__PURE__*/_jsxs(\"mesh\",{position:[data.position.x,0,data.position.z],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[.3,.3,.3]}),/*#__PURE__*/_jsx(\"meshBasicMaterial\",{color:data.material.color})]});};var Maze=function Maze(props){var data=props.data,player=props.player,targets=props.targets,chickens=props.chickens;var _useState=useState(player),_useState2=_slicedToArray(_useState,2),position=_useState2[0],setPosition=_useState2[1];var handleKeyup=function handleKeyup(code){switch(code){case'ArrowUp':setPosition(function(p){return{x:p.x,z:p.z+1};});break;case'ArrowDown':setPosition(function(p){return{x:p.x,z:p.z-1};});break;case'ArrowLeft':setPosition(function(p){return{x:p.x-1,z:p.z};});break;case'ArrowRight':setPosition(function(p){return{x:p.x+1,z:p.z};});break;}};useKeyboard(function(code){return handleKeyup(code);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(OrbitControls,{target:control.target,maxPolarAngle:control.angle,enableDamping:false}),/*#__PURE__*/_jsx(PerspectiveCamera,{makeDefault:true,fov:camera.fov,position:camera.position}),data.map(function(row,r){return row.map(function(w,c){return/*#__PURE__*/_jsx(Wall,{x:c,h:w,z:r});});}),targets.map(function(data){return/*#__PURE__*/_jsx(Target,{data:data});}),chickens.map(function(data){return/*#__PURE__*/_jsx(Chicken,{data:data});}),/*#__PURE__*/_jsx(Player,{data:position})]});};export default Maze;","map":{"version":3,"names":["OrbitControls","PerspectiveCamera","useState","useKeyboard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","control","target","angle","camera","fov","position","space","material","color","Wall","props","x","h","z","children","args","Target","data","Player","Chicken","Maze","player","targets","chickens","_useState","_useState2","_slicedToArray","setPosition","handleKeyup","code","p","maxPolarAngle","enableDamping","makeDefault","map","row","r","w","c"],"sources":["/home/samuel/experiment/3d/farm/frontend/src/view/maze.js"],"sourcesContent":["import {OrbitControls, PerspectiveCamera} from '@react-three/drei'\nimport {useState} from 'react'\n\nimport useKeyboard from './useKeyboard'\n\nlet control = {\n\ttarget : [0, .35, 0],\n\tangle: 1.45\n}\n\nlet camera = {\n\tfov: 50,\n\tposition : [3, 2, 5]\n}\n\nlet space = [4, 1, 4]\n\nlet material = {\n\tcolor: '#00FF00'\n}\n\nconst Wall = props => {\n\t\tlet {x,h,z} = props\n\nreturn\t<mesh position={[x,0,z]}>\n\t\t<boxGeometry args={ [1,.4*h,1] } />\n\t\t<meshBasicMaterial color={h ? 'green' : 'black'} />\n\t</mesh>\n\n}\n\nconst Target = props => {\n\t\tlet {data} = props\n\n\treturn\t<mesh position={[data.position.x,0,data.position.z]}>\n\t\t\t<boxGeometry args={ [.3,.3,.3] } />\n\t\t\t<meshBasicMaterial color={data.material.color} />\n\t\t</mesh>\n\t}\n\nconst Player = props => {\n\t\tlet {data} = props\n\n\treturn\t<mesh position={[data.position.x,0,data.position.z]}>\n\t\t\t<boxGeometry args={ [.3,.3,.3] } />\n\t\t\t<meshBasicMaterial color={data.material.color} />\n\t\t</mesh>\n}\n\n\nconst Chicken = props => {\n\t\tlet {data} = props\n\n\treturn\t<mesh position={[data.position.x,0,data.position.z]}>\n\t\t\t<boxGeometry args={ [.3,.3,.3] } />\n\t\t\t<meshBasicMaterial color={data.material.color} />\n\t\t</mesh>\n}\n\n\nconst Maze = props => {\n\tlet {data, player, targets, chickens} = props\n\n\tlet [position, setPosition] = useState(player)\n\n\tlet handleKeyup = code => {\n\t\tswitch(code){\n\t\t\tcase 'ArrowUp' : setPosition(p => ({x: p.x, z: p.z + 1})); break;\n\t\t\tcase 'ArrowDown' : setPosition(p => ({x: p.x, z: p.z -1})); break;\n\t\t\tcase 'ArrowLeft' : setPosition(p => ({x: p.x - 1, z: p.z})); break;\n\t\t\tcase 'ArrowRight' : setPosition(p => ({x: p.x + 1, z: p.z})); break;\n\t\t}\n\t}\n\n\tuseKeyboard(\n\t\tcode  => handleKeyup(code)\n\t)\n\n\n\treturn <>\n\t\t\t<OrbitControls target={control.target} maxPolarAngle={control.angle} enableDamping={false} />\n\t\t\t<PerspectiveCamera makeDefault fov={camera.fov} position={camera.position} />\n\n\t\t\t{ data.map( (row, r) => row.map((w,c) => <Wall x={c} h={w} z={r} /> )) }\n\n\t\t\t{ targets.map(data => <Target data={data} /> ) }\n\n\t\t\t{ chickens.map(data => <Chicken data={data} /> ) }\n\n\t\t\t<Player data={position} />\n\n\t\t</>\n}\n\nexport default Maze\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}