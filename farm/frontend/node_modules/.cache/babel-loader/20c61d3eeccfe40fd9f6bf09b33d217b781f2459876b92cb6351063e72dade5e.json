{"ast":null,"code":"import _classCallCheck from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Line, BufferGeometry, Float32BufferAttribute, LineBasicMaterial, Mesh, MeshBasicMaterial, BackSide } from 'three';\n\n/**\n *  This helper must be added as a child of the light\n */\nvar RectAreaLightHelper = /*#__PURE__*/function (_Line) {\n  _inherits(RectAreaLightHelper, _Line);\n  var _super = _createSuper(RectAreaLightHelper);\n  function RectAreaLightHelper(light, color) {\n    var _this;\n    _classCallCheck(this, RectAreaLightHelper);\n    var positions = [1, 1, 0, -1, 1, 0, -1, -1, 0, 1, -1, 0, 1, 1, 0];\n    var geometry = new BufferGeometry();\n    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));\n    geometry.computeBoundingSphere();\n    var material = new LineBasicMaterial({\n      fog: false\n    });\n    _this = _super.call(this, geometry, material);\n    _this.type = 'RectAreaLightHelper';\n    _this.light = light;\n    _this.color = color; // optional hardwired color for the helper\n    //\n\n    var positions2 = [1, 1, 0, -1, 1, 0, -1, -1, 0, 1, 1, 0, -1, -1, 0, 1, -1, 0];\n    var geometry2 = new BufferGeometry();\n    geometry2.setAttribute('position', new Float32BufferAttribute(positions2, 3));\n    geometry2.computeBoundingSphere();\n    _this.add(new Mesh(geometry2, new MeshBasicMaterial({\n      side: BackSide,\n      fog: false\n    })));\n    return _this;\n  }\n  _createClass(RectAreaLightHelper, [{\n    key: \"updateMatrixWorld\",\n    value: function updateMatrixWorld() {\n      this.scale.set(0.5 * this.light.width, 0.5 * this.light.height, 1);\n      if (this.color !== undefined) {\n        this.material.color.set(this.color);\n        this.children[0].material.color.set(this.color);\n      } else {\n        this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity); // prevent hue shift\n\n        var c = this.material.color;\n        var max = Math.max(c.r, c.g, c.b);\n        if (max > 1) c.multiplyScalar(1 / max);\n        this.children[0].material.color.copy(this.material.color);\n      }\n      this.matrixWorld.copy(this.light.matrixWorld).scale(this.scale);\n      this.children[0].matrixWorld.copy(this.matrixWorld);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.geometry.dispose();\n      this.material.dispose();\n      this.children[0].geometry.dispose();\n      this.children[0].material.dispose();\n    }\n  }]);\n  return RectAreaLightHelper;\n}(Line);\nexport { RectAreaLightHelper };","map":{"version":3,"names":["Line","BufferGeometry","Float32BufferAttribute","LineBasicMaterial","Mesh","MeshBasicMaterial","BackSide","RectAreaLightHelper","_Line","_inherits","_super","_createSuper","light","color","_this","_classCallCheck","positions","geometry","setAttribute","computeBoundingSphere","material","fog","call","type","positions2","geometry2","add","side","_createClass","key","value","updateMatrixWorld","scale","set","width","height","undefined","children","copy","multiplyScalar","intensity","c","max","Math","r","g","b","matrixWorld","dispose"],"sources":["/home/samuel/experiment/3d/farm/frontend/node_modules/three-stdlib/helpers/RectAreaLightHelper.js"],"sourcesContent":["import { Line, BufferGeometry, Float32BufferAttribute, LineBasicMaterial, Mesh, MeshBasicMaterial, BackSide } from 'three';\n\n/**\n *  This helper must be added as a child of the light\n */\n\nclass RectAreaLightHelper extends Line {\n  constructor(light, color) {\n    const positions = [1, 1, 0, -1, 1, 0, -1, -1, 0, 1, -1, 0, 1, 1, 0];\n    const geometry = new BufferGeometry();\n    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));\n    geometry.computeBoundingSphere();\n    const material = new LineBasicMaterial({\n      fog: false\n    });\n    super(geometry, material);\n    this.type = 'RectAreaLightHelper';\n    this.light = light;\n    this.color = color; // optional hardwired color for the helper\n    //\n\n    const positions2 = [1, 1, 0, -1, 1, 0, -1, -1, 0, 1, 1, 0, -1, -1, 0, 1, -1, 0];\n    const geometry2 = new BufferGeometry();\n    geometry2.setAttribute('position', new Float32BufferAttribute(positions2, 3));\n    geometry2.computeBoundingSphere();\n    this.add(new Mesh(geometry2, new MeshBasicMaterial({\n      side: BackSide,\n      fog: false\n    })));\n  }\n\n  updateMatrixWorld() {\n    this.scale.set(0.5 * this.light.width, 0.5 * this.light.height, 1);\n\n    if (this.color !== undefined) {\n      this.material.color.set(this.color);\n      this.children[0].material.color.set(this.color);\n    } else {\n      this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity); // prevent hue shift\n\n      const c = this.material.color;\n      const max = Math.max(c.r, c.g, c.b);\n      if (max > 1) c.multiplyScalar(1 / max);\n      this.children[0].material.color.copy(this.material.color);\n    }\n\n    this.matrixWorld.copy(this.light.matrixWorld).scale(this.scale);\n    this.children[0].matrixWorld.copy(this.matrixWorld);\n  }\n\n  dispose() {\n    this.geometry.dispose();\n    this.material.dispose();\n    this.children[0].geometry.dispose();\n    this.children[0].material.dispose();\n  }\n\n}\n\nexport { RectAreaLightHelper };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}