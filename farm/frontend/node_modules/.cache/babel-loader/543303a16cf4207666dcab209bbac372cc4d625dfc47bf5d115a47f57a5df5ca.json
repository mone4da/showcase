{"ast":null,"code":"import _classCallCheck from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _possibleConstructorReturn from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _inherits from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Vector3, Matrix3, LineSegments, BufferGeometry, LineBasicMaterial, Float32BufferAttribute } from 'three';\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\nvar _normalMatrix = new Matrix3();\nvar VertexNormalsHelper = /*#__PURE__*/function (_LineSegments) {\n  _inherits(VertexNormalsHelper, _LineSegments);\n  var _super = _createSuper(VertexNormalsHelper);\n  function VertexNormalsHelper(object, size, hex) {\n    var _this;\n    _classCallCheck(this, VertexNormalsHelper);\n    var geometry = new BufferGeometry();\n    var color = hex !== undefined ? hex : 0xff0000;\n    _this = _super.call(this, geometry, new LineBasicMaterial({\n      color: color,\n      toneMapped: false\n    }));\n    _this.object = object;\n    _this.size = size !== undefined ? size : 0.1;\n    var nNormals = 0;\n    var objGeometry = _this.object.geometry;\n    if (objGeometry && objGeometry.isGeometry) {\n      console.error('THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead.');\n      return _possibleConstructorReturn(_this);\n    } else if (objGeometry && objGeometry.isBufferGeometry) {\n      nNormals = objGeometry.attributes.normal.count;\n    } //\n\n    var positions = new Float32BufferAttribute(nNormals * 2 * 3, 3);\n    geometry.setAttribute('position', positions);\n    _this.type = 'VertexNormalsHelper'; //\n\n    _this.matrixAutoUpdate = false;\n    _this.update();\n    return _this;\n  }\n  _createClass(VertexNormalsHelper, [{\n    key: \"update\",\n    value: function update() {\n      this.object.updateMatrixWorld(true);\n      _normalMatrix.getNormalMatrix(this.object.matrixWorld);\n      var matrixWorld = this.object.matrixWorld;\n      var position = this.geometry.attributes.position; //\n\n      var objGeometry = this.object.geometry;\n      if (objGeometry && objGeometry.isGeometry) {\n        console.error('THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead.');\n        return;\n      } else if (objGeometry && objGeometry.isBufferGeometry) {\n        var objPos = objGeometry.attributes.position;\n        var objNorm = objGeometry.attributes.normal;\n        var idx = 0; // for simplicity, ignore index and drawcalls, and render every normal\n\n        for (var j = 0, jl = objPos.count; j < jl; j++) {\n          _v1.set(objPos.getX(j), objPos.getY(j), objPos.getZ(j)).applyMatrix4(matrixWorld);\n          _v2.set(objNorm.getX(j), objNorm.getY(j), objNorm.getZ(j));\n          _v2.applyMatrix3(_normalMatrix).normalize().multiplyScalar(this.size).add(_v1);\n          position.setXYZ(idx, _v1.x, _v1.y, _v1.z);\n          idx = idx + 1;\n          position.setXYZ(idx, _v2.x, _v2.y, _v2.z);\n          idx = idx + 1;\n        }\n      }\n      position.needsUpdate = true;\n    }\n  }]);\n  return VertexNormalsHelper;\n}(LineSegments);\nexport { VertexNormalsHelper };","map":{"version":3,"names":["Vector3","Matrix3","LineSegments","BufferGeometry","LineBasicMaterial","Float32BufferAttribute","_v1","_v2","_normalMatrix","VertexNormalsHelper","_LineSegments","_inherits","_super","_createSuper","object","size","hex","_this","_classCallCheck","geometry","color","undefined","call","toneMapped","nNormals","objGeometry","isGeometry","console","error","_possibleConstructorReturn","isBufferGeometry","attributes","normal","count","positions","setAttribute","type","matrixAutoUpdate","update","_createClass","key","value","updateMatrixWorld","getNormalMatrix","matrixWorld","position","objPos","objNorm","idx","j","jl","set","getX","getY","getZ","applyMatrix4","applyMatrix3","normalize","multiplyScalar","add","setXYZ","x","y","z","needsUpdate"],"sources":["/home/samuel/experiment/3d/farm/frontend/node_modules/three-stdlib/helpers/VertexNormalsHelper.js"],"sourcesContent":["import { Vector3, Matrix3, LineSegments, BufferGeometry, LineBasicMaterial, Float32BufferAttribute } from 'three';\n\nconst _v1 = new Vector3();\n\nconst _v2 = new Vector3();\n\nconst _normalMatrix = new Matrix3();\n\nclass VertexNormalsHelper extends LineSegments {\n  constructor(object, size, hex) {\n    const geometry = new BufferGeometry();\n    const color = hex !== undefined ? hex : 0xff0000;\n    super(geometry, new LineBasicMaterial({\n      color,\n      toneMapped: false\n    }));\n    this.object = object;\n    this.size = size !== undefined ? size : 0.1;\n    let nNormals = 0;\n    const objGeometry = this.object.geometry;\n\n    if (objGeometry && objGeometry.isGeometry) {\n      console.error('THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead.');\n      return;\n    } else if (objGeometry && objGeometry.isBufferGeometry) {\n      nNormals = objGeometry.attributes.normal.count;\n    } //\n\n\n    const positions = new Float32BufferAttribute(nNormals * 2 * 3, 3);\n    geometry.setAttribute('position', positions);\n    this.type = 'VertexNormalsHelper'; //\n\n    this.matrixAutoUpdate = false;\n    this.update();\n  }\n\n  update() {\n    this.object.updateMatrixWorld(true);\n\n    _normalMatrix.getNormalMatrix(this.object.matrixWorld);\n\n    const matrixWorld = this.object.matrixWorld;\n    const position = this.geometry.attributes.position; //\n\n    const objGeometry = this.object.geometry;\n\n    if (objGeometry && objGeometry.isGeometry) {\n      console.error('THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead.');\n      return;\n    } else if (objGeometry && objGeometry.isBufferGeometry) {\n      const objPos = objGeometry.attributes.position;\n      const objNorm = objGeometry.attributes.normal;\n      let idx = 0; // for simplicity, ignore index and drawcalls, and render every normal\n\n      for (let j = 0, jl = objPos.count; j < jl; j++) {\n        _v1.set(objPos.getX(j), objPos.getY(j), objPos.getZ(j)).applyMatrix4(matrixWorld);\n\n        _v2.set(objNorm.getX(j), objNorm.getY(j), objNorm.getZ(j));\n\n        _v2.applyMatrix3(_normalMatrix).normalize().multiplyScalar(this.size).add(_v1);\n\n        position.setXYZ(idx, _v1.x, _v1.y, _v1.z);\n        idx = idx + 1;\n        position.setXYZ(idx, _v2.x, _v2.y, _v2.z);\n        idx = idx + 1;\n      }\n    }\n\n    position.needsUpdate = true;\n  }\n\n}\n\nexport { VertexNormalsHelper };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}