{"ast":null,"code":"import _classCallCheck from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Object3D, Matrix4, Vector3, SphereGeometry, MeshBasicMaterial, Color, LineBasicMaterial, Mesh, Line, Quaternion, BufferGeometry, BufferAttribute } from 'three';\nvar CCDIKHelper = /*#__PURE__*/function (_Object3D) {\n  _inherits(CCDIKHelper, _Object3D);\n  var _super = _createSuper(CCDIKHelper);\n  function CCDIKHelper(mesh) {\n    var _this;\n    var iks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var sphereSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.25;\n    _classCallCheck(this, CCDIKHelper);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"_m\", new Matrix4());\n    _defineProperty(_assertThisInitialized(_this), \"_v\", new Vector3());\n    _this.root = mesh;\n    _this.iks = iks;\n    _this.matrix.copy(mesh.matrixWorld);\n    _this.matrixAutoUpdate = false;\n    _this.sphereGeometry = new SphereGeometry(sphereSize, 16, 8);\n    _this.targetSphereMaterial = new MeshBasicMaterial({\n      color: new Color(0xff8888),\n      depthTest: false,\n      depthWrite: false,\n      transparent: true\n    });\n    _this.effectorSphereMaterial = new MeshBasicMaterial({\n      color: new Color(0x88ff88),\n      depthTest: false,\n      depthWrite: false,\n      transparent: true\n    });\n    _this.linkSphereMaterial = new MeshBasicMaterial({\n      color: new Color(0x8888ff),\n      depthTest: false,\n      depthWrite: false,\n      transparent: true\n    });\n    _this.lineMaterial = new LineBasicMaterial({\n      color: new Color(0xff0000),\n      depthTest: false,\n      depthWrite: false,\n      transparent: true\n    });\n    function createLineGeometry(ik) {\n      var geometry = new BufferGeometry();\n      var vertices = new Float32Array((2 + ik.links.length) * 3);\n      geometry.setAttribute('position', new BufferAttribute(vertices, 3));\n      return geometry;\n    }\n    var scope = _assertThisInitialized(_this);\n    function createTargetMesh() {\n      return new Mesh(scope.sphereGeometry, scope.targetSphereMaterial);\n    }\n    function createEffectorMesh() {\n      return new Mesh(scope.sphereGeometry, scope.effectorSphereMaterial);\n    }\n    function createLinkMesh() {\n      return new Mesh(scope.sphereGeometry, scope.linkSphereMaterial);\n    }\n    function createLine(ik) {\n      return new Line(createLineGeometry(ik), scope.lineMaterial);\n    }\n    for (var i = 0, il = iks.length; i < il; i++) {\n      var ik = iks[i];\n      _this.add(createTargetMesh());\n      _this.add(createEffectorMesh());\n      for (var j = 0, jl = ik.links.length; j < jl; j++) {\n        _this.add(createLinkMesh());\n      }\n      _this.add(createLine(ik));\n    }\n    return _this;\n  }\n  _createClass(CCDIKHelper, [{\n    key: \"_getPosition\",\n    value: function _getPosition(bone, matrixWorldInv) {\n      return this._v.setFromMatrixPosition(bone.matrixWorld).applyMatrix4(matrixWorldInv);\n    }\n  }, {\n    key: \"_setPositionOfBoneToAttributeArray\",\n    value: function _setPositionOfBoneToAttributeArray(array, index, bone, matrixWorldInv) {\n      var v = this._getPosition(bone, matrixWorldInv);\n      array[index * 3 + 0] = v.x;\n      array[index * 3 + 1] = v.y;\n      array[index * 3 + 2] = v.z;\n    }\n  }, {\n    key: \"updateMatrixWorld\",\n    value: function updateMatrixWorld(force) {\n      var mesh = this.root;\n      if (this.visible) {\n        var offset = 0;\n        var iks = this.iks;\n        var bones = mesh.skeleton.bones;\n        this._m.copy(mesh.matrixWorld).invert();\n        for (var i = 0, il = iks.length; i < il; i++) {\n          var ik = iks[i];\n          var targetBone = bones[ik.target];\n          var effectorBone = bones[ik.effector];\n          var targetMesh = this.children[offset++];\n          var effectorMesh = this.children[offset++];\n          targetMesh.position.copy(this._getPosition(targetBone, this._m));\n          effectorMesh.position.copy(this._getPosition(effectorBone, this._m));\n          for (var j = 0, jl = ik.links.length; j < jl; j++) {\n            var link = ik.links[j];\n            var linkBone = bones[link.index];\n            var linkMesh = this.children[offset++];\n            linkMesh.position.copy(this._getPosition(linkBone, this._m));\n          }\n          var line = this.children[offset++];\n          var array = line.geometry.attributes.position.array;\n          this._setPositionOfBoneToAttributeArray(array, 0, targetBone, this._m);\n          this._setPositionOfBoneToAttributeArray(array, 1, effectorBone, this._m);\n          for (var _j = 0, _jl = ik.links.length; _j < _jl; _j++) {\n            var _link = ik.links[_j];\n            var _linkBone = bones[_link.index];\n            this._setPositionOfBoneToAttributeArray(array, _j + 2, _linkBone, this._m);\n          }\n          line.geometry.attributes.position.needsUpdate = true;\n        }\n      }\n      this.matrix.copy(mesh.matrixWorld);\n      _get(_getPrototypeOf(CCDIKHelper.prototype), \"updateMatrixWorld\", this).call(this, force);\n    }\n  }]);\n  return CCDIKHelper;\n}(Object3D);\n/**\n * CCD Algorithm\n *  - https://sites.google.com/site/auraliusproject/ccd-algorithm\n *\n * // ik parameter example\n * //\n * // target, effector, index in links are bone index in skeleton.bones.\n * // the bones relation should be\n * // <-- parent                                  child -->\n * // links[ n ], links[ n - 1 ], ..., links[ 0 ], effector\n * iks = [ {\n *\ttarget: 1,\n *\teffector: 2,\n *\tlinks: [ { index: 5, limitation: new Vector3( 1, 0, 0 ) }, { index: 4, enabled: false }, { index : 3 } ],\n *\titeration: 10,\n *\tminAngle: 0.0,\n *\tmaxAngle: 1.0,\n * } ];\n */\nvar CCDIKSolver = /*#__PURE__*/function () {\n  function CCDIKSolver(mesh, iks) {\n    _classCallCheck(this, CCDIKSolver);\n    _defineProperty(this, \"q\", new Quaternion());\n    _defineProperty(this, \"targetPos\", new Vector3());\n    _defineProperty(this, \"targetVec\", new Vector3());\n    _defineProperty(this, \"effectorPos\", new Vector3());\n    _defineProperty(this, \"effectorVec\", new Vector3());\n    _defineProperty(this, \"linkPos\", new Vector3());\n    _defineProperty(this, \"invLinkQ\", new Quaternion());\n    _defineProperty(this, \"linkScale\", new Vector3());\n    _defineProperty(this, \"axis\", new Vector3());\n    _defineProperty(this, \"vector\", new Vector3());\n    this.mesh = mesh;\n    this.iks = iks;\n    var bones = this.mesh.skeleton.bones;\n    for (var i = 0, il = this.iks.length; i < il; i++) {\n      var ik = this.iks[i];\n      var effector = bones[ik.effector];\n      var links = ik.links;\n      var link0 = void 0,\n        link1 = void 0;\n      link0 = effector;\n      for (var j = 0, jl = links.length; j < jl; j++) {\n        link1 = bones[links[j].index];\n        if (link0.parent !== link1) {\n          console.warn(\"THREE.CCDIKSolver: bone \".concat(link0.name, \" is not the child of bone \").concat(link1.name));\n        }\n        link0 = link1;\n      }\n    }\n  }\n  _createClass(CCDIKSolver, [{\n    key: \"update\",\n    value: function update() {\n      var bones = this.mesh.skeleton.bones;\n      var iks = this.iks; // for reference overhead reduction in loop\n\n      var math = Math;\n      for (var i = 0, il = iks.length; i < il; i++) {\n        var ik = iks[i];\n        var effector = bones[ik.effector];\n        var target = bones[ik.target]; // don't use getWorldPosition() here for the performance\n        // because it calls updateMatrixWorld( true ) inside.\n\n        this.targetPos.setFromMatrixPosition(target.matrixWorld);\n        var links = ik.links;\n        var iteration = ik.iteration !== undefined ? ik.iteration : 1;\n        for (var j = 0; j < iteration; j++) {\n          var rotated = false;\n          for (var k = 0, kl = links.length; k < kl; k++) {\n            var link = bones[links[k].index]; // skip this link and following links.\n            // this skip is used for MMD performance optimization.\n\n            if (links[k].enabled === false) break;\n            var limitation = links[k].limitation;\n            var rotationMin = links[k].rotationMin;\n            var rotationMax = links[k].rotationMax; // don't use getWorldPosition/Quaternion() here for the performance\n            // because they call updateMatrixWorld( true ) inside.\n\n            link.matrixWorld.decompose(this.linkPos, this.invLinkQ, this.linkScale);\n            this.invLinkQ.invert();\n            this.effectorPos.setFromMatrixPosition(effector.matrixWorld); // work in link world\n\n            this.effectorVec.subVectors(this.effectorPos, this.linkPos);\n            this.effectorVec.applyQuaternion(this.invLinkQ);\n            this.effectorVec.normalize();\n            this.targetVec.subVectors(this.targetPos, this.linkPos);\n            this.targetVec.applyQuaternion(this.invLinkQ);\n            this.targetVec.normalize();\n            var angle = this.targetVec.dot(this.effectorVec);\n            if (angle > 1.0) {\n              angle = 1.0;\n            } else if (angle < -1.0) {\n              angle = -1.0;\n            }\n            angle = math.acos(angle); // skip if changing angle is too small to prevent vibration of bone\n            // Refer to http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mmd.three.js\n\n            if (angle < 1e-5) continue;\n            if (ik.minAngle !== undefined && angle < ik.minAngle) {\n              angle = ik.minAngle;\n            }\n            if (ik.maxAngle !== undefined && angle > ik.maxAngle) {\n              angle = ik.maxAngle;\n            }\n            this.axis.crossVectors(this.effectorVec, this.targetVec);\n            this.axis.normalize();\n            this.q.setFromAxisAngle(this.axis, angle);\n            link.quaternion.multiply(this.q); // TODO: re-consider the limitation specification\n\n            if (limitation !== undefined) {\n              var c = link.quaternion.w;\n              if (c > 1.0) c = 1.0;\n              var c2 = math.sqrt(1 - c * c);\n              link.quaternion.set(limitation.x * c2, limitation.y * c2, limitation.z * c2, c);\n            }\n            if (rotationMin !== undefined) {\n              link.rotation.setFromVector3(this.vector.setFromEuler(link.rotation).max(rotationMin));\n            }\n            if (rotationMax !== undefined) {\n              link.rotation.setFromVector3(this.vector.setFromEuler(link.rotation).min(rotationMax));\n            }\n            link.updateMatrixWorld(true);\n            rotated = true;\n          }\n          if (!rotated) break;\n        }\n      }\n      return this;\n    }\n  }, {\n    key: \"createHelper\",\n    value: function createHelper() {\n      return new CCDIKHelper(this.mesh, this.mesh.geometry.userData.MMD.iks);\n    }\n  }]);\n  return CCDIKSolver;\n}();\nexport { CCDIKHelper, CCDIKSolver };","map":{"version":3,"names":["_defineProperty","Object3D","Matrix4","Vector3","SphereGeometry","MeshBasicMaterial","Color","LineBasicMaterial","Mesh","Line","Quaternion","BufferGeometry","BufferAttribute","CCDIKHelper","_Object3D","_inherits","_super","_createSuper","mesh","_this","iks","arguments","length","undefined","sphereSize","_classCallCheck","call","_assertThisInitialized","root","matrix","copy","matrixWorld","matrixAutoUpdate","sphereGeometry","targetSphereMaterial","color","depthTest","depthWrite","transparent","effectorSphereMaterial","linkSphereMaterial","lineMaterial","createLineGeometry","ik","geometry","vertices","Float32Array","links","setAttribute","scope","createTargetMesh","createEffectorMesh","createLinkMesh","createLine","i","il","add","j","jl","_createClass","key","value","_getPosition","bone","matrixWorldInv","_v","setFromMatrixPosition","applyMatrix4","_setPositionOfBoneToAttributeArray","array","index","v","x","y","z","updateMatrixWorld","force","visible","offset","bones","skeleton","_m","invert","targetBone","target","effectorBone","effector","targetMesh","children","effectorMesh","position","link","linkBone","linkMesh","line","attributes","needsUpdate","_get","_getPrototypeOf","prototype","CCDIKSolver","link0","link1","parent","console","warn","concat","name","update","math","Math","targetPos","iteration","rotated","k","kl","enabled","limitation","rotationMin","rotationMax","decompose","linkPos","invLinkQ","linkScale","effectorPos","effectorVec","subVectors","applyQuaternion","normalize","targetVec","angle","dot","acos","minAngle","maxAngle","axis","crossVectors","q","setFromAxisAngle","quaternion","multiply","c","w","c2","sqrt","set","rotation","setFromVector3","vector","setFromEuler","max","min","createHelper","userData","MMD"],"sources":["/home/samuel/experiment/3d/farm/frontend/node_modules/three-stdlib/animation/CCDIKSolver.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Object3D, Matrix4, Vector3, SphereGeometry, MeshBasicMaterial, Color, LineBasicMaterial, Mesh, Line, Quaternion, BufferGeometry, BufferAttribute } from 'three';\n\nclass CCDIKHelper extends Object3D {\n  constructor(mesh, iks = [], sphereSize = 0.25) {\n    super();\n\n    _defineProperty(this, \"_m\", new Matrix4());\n\n    _defineProperty(this, \"_v\", new Vector3());\n\n    this.root = mesh;\n    this.iks = iks;\n    this.matrix.copy(mesh.matrixWorld);\n    this.matrixAutoUpdate = false;\n    this.sphereGeometry = new SphereGeometry(sphereSize, 16, 8);\n    this.targetSphereMaterial = new MeshBasicMaterial({\n      color: new Color(0xff8888),\n      depthTest: false,\n      depthWrite: false,\n      transparent: true\n    });\n    this.effectorSphereMaterial = new MeshBasicMaterial({\n      color: new Color(0x88ff88),\n      depthTest: false,\n      depthWrite: false,\n      transparent: true\n    });\n    this.linkSphereMaterial = new MeshBasicMaterial({\n      color: new Color(0x8888ff),\n      depthTest: false,\n      depthWrite: false,\n      transparent: true\n    });\n    this.lineMaterial = new LineBasicMaterial({\n      color: new Color(0xff0000),\n      depthTest: false,\n      depthWrite: false,\n      transparent: true\n    });\n\n    function createLineGeometry(ik) {\n      const geometry = new BufferGeometry();\n      const vertices = new Float32Array((2 + ik.links.length) * 3);\n      geometry.setAttribute('position', new BufferAttribute(vertices, 3));\n      return geometry;\n    }\n\n    const scope = this;\n\n    function createTargetMesh() {\n      return new Mesh(scope.sphereGeometry, scope.targetSphereMaterial);\n    }\n\n    function createEffectorMesh() {\n      return new Mesh(scope.sphereGeometry, scope.effectorSphereMaterial);\n    }\n\n    function createLinkMesh() {\n      return new Mesh(scope.sphereGeometry, scope.linkSphereMaterial);\n    }\n\n    function createLine(ik) {\n      return new Line(createLineGeometry(ik), scope.lineMaterial);\n    }\n\n    for (let i = 0, il = iks.length; i < il; i++) {\n      const ik = iks[i];\n      this.add(createTargetMesh());\n      this.add(createEffectorMesh());\n\n      for (let j = 0, jl = ik.links.length; j < jl; j++) {\n        this.add(createLinkMesh());\n      }\n\n      this.add(createLine(ik));\n    }\n  }\n\n  _getPosition(bone, matrixWorldInv) {\n    return this._v.setFromMatrixPosition(bone.matrixWorld).applyMatrix4(matrixWorldInv);\n  }\n\n  _setPositionOfBoneToAttributeArray(array, index, bone, matrixWorldInv) {\n    const v = this._getPosition(bone, matrixWorldInv);\n\n    array[index * 3 + 0] = v.x;\n    array[index * 3 + 1] = v.y;\n    array[index * 3 + 2] = v.z;\n  }\n\n  updateMatrixWorld(force) {\n    const mesh = this.root;\n\n    if (this.visible) {\n      let offset = 0;\n      const iks = this.iks;\n      const bones = mesh.skeleton.bones;\n\n      this._m.copy(mesh.matrixWorld).invert();\n\n      for (let i = 0, il = iks.length; i < il; i++) {\n        const ik = iks[i];\n        const targetBone = bones[ik.target];\n        const effectorBone = bones[ik.effector];\n        const targetMesh = this.children[offset++];\n        const effectorMesh = this.children[offset++];\n        targetMesh.position.copy(this._getPosition(targetBone, this._m));\n        effectorMesh.position.copy(this._getPosition(effectorBone, this._m));\n\n        for (let j = 0, jl = ik.links.length; j < jl; j++) {\n          const link = ik.links[j];\n          const linkBone = bones[link.index];\n          const linkMesh = this.children[offset++];\n          linkMesh.position.copy(this._getPosition(linkBone, this._m));\n        }\n\n        const line = this.children[offset++];\n        const array = line.geometry.attributes.position.array;\n\n        this._setPositionOfBoneToAttributeArray(array, 0, targetBone, this._m);\n\n        this._setPositionOfBoneToAttributeArray(array, 1, effectorBone, this._m);\n\n        for (let j = 0, jl = ik.links.length; j < jl; j++) {\n          const link = ik.links[j];\n          const linkBone = bones[link.index];\n\n          this._setPositionOfBoneToAttributeArray(array, j + 2, linkBone, this._m);\n        }\n\n        line.geometry.attributes.position.needsUpdate = true;\n      }\n    }\n\n    this.matrix.copy(mesh.matrixWorld);\n    super.updateMatrixWorld(force);\n  }\n\n}\n/**\n * CCD Algorithm\n *  - https://sites.google.com/site/auraliusproject/ccd-algorithm\n *\n * // ik parameter example\n * //\n * // target, effector, index in links are bone index in skeleton.bones.\n * // the bones relation should be\n * // <-- parent                                  child -->\n * // links[ n ], links[ n - 1 ], ..., links[ 0 ], effector\n * iks = [ {\n *\ttarget: 1,\n *\teffector: 2,\n *\tlinks: [ { index: 5, limitation: new Vector3( 1, 0, 0 ) }, { index: 4, enabled: false }, { index : 3 } ],\n *\titeration: 10,\n *\tminAngle: 0.0,\n *\tmaxAngle: 1.0,\n * } ];\n */\n\n\nclass CCDIKSolver {\n  constructor(mesh, iks) {\n    _defineProperty(this, \"q\", new Quaternion());\n\n    _defineProperty(this, \"targetPos\", new Vector3());\n\n    _defineProperty(this, \"targetVec\", new Vector3());\n\n    _defineProperty(this, \"effectorPos\", new Vector3());\n\n    _defineProperty(this, \"effectorVec\", new Vector3());\n\n    _defineProperty(this, \"linkPos\", new Vector3());\n\n    _defineProperty(this, \"invLinkQ\", new Quaternion());\n\n    _defineProperty(this, \"linkScale\", new Vector3());\n\n    _defineProperty(this, \"axis\", new Vector3());\n\n    _defineProperty(this, \"vector\", new Vector3());\n\n    this.mesh = mesh;\n    this.iks = iks;\n    const bones = this.mesh.skeleton.bones;\n\n    for (let i = 0, il = this.iks.length; i < il; i++) {\n      const ik = this.iks[i];\n      const effector = bones[ik.effector];\n      const links = ik.links;\n      let link0, link1;\n      link0 = effector;\n\n      for (let j = 0, jl = links.length; j < jl; j++) {\n        link1 = bones[links[j].index];\n\n        if (link0.parent !== link1) {\n          console.warn(`THREE.CCDIKSolver: bone ${link0.name} is not the child of bone ${link1.name}`);\n        }\n\n        link0 = link1;\n      }\n    }\n  }\n\n  update() {\n    const bones = this.mesh.skeleton.bones;\n    const iks = this.iks; // for reference overhead reduction in loop\n\n    const math = Math;\n\n    for (let i = 0, il = iks.length; i < il; i++) {\n      const ik = iks[i];\n      const effector = bones[ik.effector];\n      const target = bones[ik.target]; // don't use getWorldPosition() here for the performance\n      // because it calls updateMatrixWorld( true ) inside.\n\n      this.targetPos.setFromMatrixPosition(target.matrixWorld);\n      const links = ik.links;\n      const iteration = ik.iteration !== undefined ? ik.iteration : 1;\n\n      for (let j = 0; j < iteration; j++) {\n        let rotated = false;\n\n        for (let k = 0, kl = links.length; k < kl; k++) {\n          const link = bones[links[k].index]; // skip this link and following links.\n          // this skip is used for MMD performance optimization.\n\n          if (links[k].enabled === false) break;\n          const limitation = links[k].limitation;\n          const rotationMin = links[k].rotationMin;\n          const rotationMax = links[k].rotationMax; // don't use getWorldPosition/Quaternion() here for the performance\n          // because they call updateMatrixWorld( true ) inside.\n\n          link.matrixWorld.decompose(this.linkPos, this.invLinkQ, this.linkScale);\n          this.invLinkQ.invert();\n          this.effectorPos.setFromMatrixPosition(effector.matrixWorld); // work in link world\n\n          this.effectorVec.subVectors(this.effectorPos, this.linkPos);\n          this.effectorVec.applyQuaternion(this.invLinkQ);\n          this.effectorVec.normalize();\n          this.targetVec.subVectors(this.targetPos, this.linkPos);\n          this.targetVec.applyQuaternion(this.invLinkQ);\n          this.targetVec.normalize();\n          let angle = this.targetVec.dot(this.effectorVec);\n\n          if (angle > 1.0) {\n            angle = 1.0;\n          } else if (angle < -1.0) {\n            angle = -1.0;\n          }\n\n          angle = math.acos(angle); // skip if changing angle is too small to prevent vibration of bone\n          // Refer to http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mmd.three.js\n\n          if (angle < 1e-5) continue;\n\n          if (ik.minAngle !== undefined && angle < ik.minAngle) {\n            angle = ik.minAngle;\n          }\n\n          if (ik.maxAngle !== undefined && angle > ik.maxAngle) {\n            angle = ik.maxAngle;\n          }\n\n          this.axis.crossVectors(this.effectorVec, this.targetVec);\n          this.axis.normalize();\n          this.q.setFromAxisAngle(this.axis, angle);\n          link.quaternion.multiply(this.q); // TODO: re-consider the limitation specification\n\n          if (limitation !== undefined) {\n            let c = link.quaternion.w;\n            if (c > 1.0) c = 1.0;\n            const c2 = math.sqrt(1 - c * c);\n            link.quaternion.set(limitation.x * c2, limitation.y * c2, limitation.z * c2, c);\n          }\n\n          if (rotationMin !== undefined) {\n            link.rotation.setFromVector3(this.vector.setFromEuler(link.rotation).max(rotationMin));\n          }\n\n          if (rotationMax !== undefined) {\n            link.rotation.setFromVector3(this.vector.setFromEuler(link.rotation).min(rotationMax));\n          }\n\n          link.updateMatrixWorld(true);\n          rotated = true;\n        }\n\n        if (!rotated) break;\n      }\n    }\n\n    return this;\n  }\n\n  createHelper() {\n    return new CCDIKHelper(this.mesh, this.mesh.geometry.userData.MMD.iks);\n  }\n\n}\n\nexport { CCDIKHelper, CCDIKSolver };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}