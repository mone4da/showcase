{"ast":null,"code":"import _slicedToArray from\"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{Rufus,Gunter}from'./chicken';import useKeyboard from'./useKeyboard';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chickens=function Chickens(props){var players=props.players;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Rufus,{players:players}),/*#__PURE__*/_jsx(Gunter,{players:players})]});};var Wall=function Wall(props){var x=props.x,h=props.h,z=props.z;return/*#__PURE__*/_jsx(\"rect\",{x:x,y:z,width:1,height:1,fill:h?'green':' black'});};var Player=function Player(props){var position=props.position,material=props.material;return/*#__PURE__*/_jsx(\"rect\",{x:position.x+.1,y:position.z+.1,width:\".8\",height:\".8\",fill:material.color});};var moveTo=function moveTo(data,code,p){var tryPosition=function tryPosition(old,p){return data[p.z][p.x]?old:p;};switch(code){case'ArrowUp':return tryPosition(p,{x:p.x,z:p.z-1});case'ArrowDown':return tryPosition(p,{x:p.x,z:p.z+1});case'ArrowLeft':return tryPosition(p,{x:p.x-1,z:p.z});case'ArrowRight':return tryPosition(p,{x:p.x+1,z:p.z});default:return p;}};var Maze=function Maze(props){var data=props.data,style=props.style,player=props.player;var _useState=useState(player.position),_useState2=_slicedToArray(_useState,2),position=_useState2[0],setPosition=_useState2[1];var width=data[0].length;var height=data.length;var scale={x:style.width/width,y:style.height/height};useKeyboard({onPressing:function onPressing(code){return setPosition(function(p){return moveTo(data,code,p);});}});return/*#__PURE__*/_jsx(\"svg\",{style:style,children:/*#__PURE__*/_jsxs(\"g\",{transform:\"scale(\".concat(scale.x,\",\").concat(scale.y,\")\"),children:[data.map(function(row,r){return row.map(function(w,c){return/*#__PURE__*/_jsx(Wall,{x:c,h:w,z:r});});}),/*#__PURE__*/_jsx(Player,{position:position,material:player.material}),/*#__PURE__*/_jsx(Chickens,{players:[position]})]})});};export default Maze;","map":{"version":3,"names":["useState","Rufus","Gunter","useKeyboard","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Chickens","props","players","children","Wall","x","h","z","y","width","height","fill","Player","position","material","color","moveTo","data","code","p","tryPosition","old","Maze","style","player","_useState","_useState2","_slicedToArray","setPosition","length","scale","onPressing","transform","concat","map","row","r","w","c"],"sources":["/home/samuel/experiment/3d/farm/frontend/src/view/maze.js"],"sourcesContent":["import {useState} from 'react'\nimport {Rufus, Gunter} from './chicken'\nimport useKeyboard from './useKeyboard'\n\nconst Chickens = props => {\n\tlet {players} = props\n\treturn <>\n\t\t\t<Rufus players={players} />\n\t\t\t<Gunter players={players} />\n\t\t</>\n}\n\nconst Wall = props => {\n\t\tlet {x,h,z} = props\n\n\treturn <rect\n\t\t\tx={x}\n\t\t\ty={z}\n\t\t\twidth={1}\n\t\t\theight={1}\n\t\t\tfill={h ? 'green' : ' black'} \n\t\t/>\n}\n\nconst Player = props => {\n\t\tlet {position, material} = props\n\n\treturn\t<rect\n\t\t\tx={position.x + .1}\n\t\t\ty={position.z + .1}\n\t\t\twidth='.8'\n\t\t\theight='.8'\n\t\t\tfill={material.color} \n\t\t/>\n}\n\nlet moveTo = (data, code, p) => {\n\tlet tryPosition = (old, p) => data[p.z][p.x] ? old : p\n\n\tswitch(code){\n\t\tcase 'ArrowUp' : return tryPosition(p, {x: p.x, z: p.z - 1})\n\t\tcase 'ArrowDown' : return tryPosition(p, {x: p.x, z: p.z + 1})\n\t\tcase 'ArrowLeft' : return tryPosition(p, {x: p.x - 1, z: p.z})\n\t\tcase 'ArrowRight' : return tryPosition(p, {x: p.x + 1, z: p.z})\n\t\tdefault : return p\n\t}\n}\n\n\n\nlet Maze = props => {\n\tlet {data, style, player} = props\n\n\tlet [position, setPosition] = useState(player.position)\n\n\tlet width = data[0].length\n\tlet height = data.length\n\n\tlet scale = {\n\t\tx : style.width/width,\n\t\ty: style.height/height\n\t}\n\n\tuseKeyboard({\n\t\tonPressing : code  => setPosition(p => moveTo(data, code, p))\n\t})\n\n\treturn <svg style={style} >\n\t\t\t<g transform={`scale(${scale.x},${scale.y})`}>\n\t\t\t\t{data.map( (row, r) => row.map((w,c) => <Wall x={c} h={w} z={r} /> ))}\n\n\t\t\t\t<Player position={position} material={player.material} />\n\n\t\t\t\t<Chickens players={[position]} />\n\t\t\t</g>\n\t\t</svg>\n}\n\nexport default Maze\n"],"mappings":"8HAAA,OAAQA,QAAQ,KAAO,OAAO,CAC9B,OAAQC,KAAK,CAAEC,MAAM,KAAO,WAAW,CACvC,MAAO,CAAAC,WAAW,KAAM,eAAe,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvC,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAGC,KAAK,CAAI,CACzB,GAAK,CAAAC,OAAO,CAAID,KAAK,CAAhBC,OAAO,CACZ,mBAAOH,KAAA,CAAAF,SAAA,EAAAM,QAAA,eACLR,IAAA,CAACJ,KAAK,EAACW,OAAO,CAAEA,OAAQ,EAAG,cAC3BP,IAAA,CAACH,MAAM,EAACU,OAAO,CAAEA,OAAQ,EAAG,GAC1B,CACL,CAAC,CAED,GAAM,CAAAE,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAGH,KAAK,CAAI,CACpB,GAAK,CAAAI,CAAC,CAAQJ,KAAK,CAAdI,CAAC,CAACC,CAAC,CAAML,KAAK,CAAZK,CAAC,CAACC,CAAC,CAAIN,KAAK,CAAVM,CAAC,CAEX,mBAAOZ,IAAA,SACLU,CAAC,CAAEA,CAAE,CACLG,CAAC,CAAED,CAAE,CACLE,KAAK,CAAE,CAAE,CACTC,MAAM,CAAE,CAAE,CACVC,IAAI,CAAEL,CAAC,CAAG,OAAO,CAAG,QAAS,EAC5B,CACJ,CAAC,CAED,GAAM,CAAAM,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAGX,KAAK,CAAI,CACtB,GAAK,CAAAY,QAAQ,CAAcZ,KAAK,CAA3BY,QAAQ,CAAEC,QAAQ,CAAIb,KAAK,CAAjBa,QAAQ,CAExB,mBAAOnB,IAAA,SACLU,CAAC,CAAEQ,QAAQ,CAACR,CAAC,CAAG,EAAG,CACnBG,CAAC,CAAEK,QAAQ,CAACN,CAAC,CAAG,EAAG,CACnBE,KAAK,CAAC,IAAI,CACVC,MAAM,CAAC,IAAI,CACXC,IAAI,CAAEG,QAAQ,CAACC,KAAM,EACpB,CACJ,CAAC,CAED,GAAI,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAIC,IAAI,CAAEC,IAAI,CAAEC,CAAC,CAAK,CAC/B,GAAI,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,GAAG,CAAEF,CAAC,QAAK,CAAAF,IAAI,CAACE,CAAC,CAACZ,CAAC,CAAC,CAACY,CAAC,CAACd,CAAC,CAAC,CAAGgB,GAAG,CAAGF,CAAC,GAEtD,OAAOD,IAAI,EACV,IAAK,SAAS,CAAG,MAAO,CAAAE,WAAW,CAACD,CAAC,CAAE,CAACd,CAAC,CAAEc,CAAC,CAACd,CAAC,CAAEE,CAAC,CAAEY,CAAC,CAACZ,CAAC,CAAG,CAAC,CAAC,CAAC,CAC5D,IAAK,WAAW,CAAG,MAAO,CAAAa,WAAW,CAACD,CAAC,CAAE,CAACd,CAAC,CAAEc,CAAC,CAACd,CAAC,CAAEE,CAAC,CAAEY,CAAC,CAACZ,CAAC,CAAG,CAAC,CAAC,CAAC,CAC9D,IAAK,WAAW,CAAG,MAAO,CAAAa,WAAW,CAACD,CAAC,CAAE,CAACd,CAAC,CAAEc,CAAC,CAACd,CAAC,CAAG,CAAC,CAAEE,CAAC,CAAEY,CAAC,CAACZ,CAAC,CAAC,CAAC,CAC9D,IAAK,YAAY,CAAG,MAAO,CAAAa,WAAW,CAACD,CAAC,CAAE,CAACd,CAAC,CAAEc,CAAC,CAACd,CAAC,CAAG,CAAC,CAAEE,CAAC,CAAEY,CAAC,CAACZ,CAAC,CAAC,CAAC,CAC/D,QAAU,MAAO,CAAAY,CAAC,EAEpB,CAAC,CAID,GAAI,CAAAG,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAGrB,KAAK,CAAI,CACnB,GAAK,CAAAgB,IAAI,CAAmBhB,KAAK,CAA5BgB,IAAI,CAAEM,KAAK,CAAYtB,KAAK,CAAtBsB,KAAK,CAAEC,MAAM,CAAIvB,KAAK,CAAfuB,MAAM,CAExB,IAAAC,SAAA,CAA8BnC,QAAQ,CAACkC,MAAM,CAACX,QAAQ,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAlDZ,QAAQ,CAAAa,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE1B,GAAI,CAAAjB,KAAK,CAAGQ,IAAI,CAAC,CAAC,CAAC,CAACY,MAAM,CAC1B,GAAI,CAAAnB,MAAM,CAAGO,IAAI,CAACY,MAAM,CAExB,GAAI,CAAAC,KAAK,CAAG,CACXzB,CAAC,CAAGkB,KAAK,CAACd,KAAK,CAACA,KAAK,CACrBD,CAAC,CAAEe,KAAK,CAACb,MAAM,CAACA,MACjB,CAAC,CAEDjB,WAAW,CAAC,CACXsC,UAAU,CAAG,SAAAA,WAAAb,IAAI,QAAK,CAAAU,WAAW,CAAC,SAAAT,CAAC,QAAI,CAAAH,MAAM,CAACC,IAAI,CAAEC,IAAI,CAAEC,CAAC,CAAC,GAAC,EAC9D,CAAC,CAAC,CAEF,mBAAOxB,IAAA,QAAK4B,KAAK,CAAEA,KAAM,CAAApB,QAAA,cACvBJ,KAAA,MAAGiC,SAAS,UAAAC,MAAA,CAAWH,KAAK,CAACzB,CAAC,MAAA4B,MAAA,CAAIH,KAAK,CAACtB,CAAC,KAAI,CAAAL,QAAA,EAC3Cc,IAAI,CAACiB,GAAG,CAAE,SAACC,GAAG,CAAEC,CAAC,QAAK,CAAAD,GAAG,CAACD,GAAG,CAAC,SAACG,CAAC,CAACC,CAAC,qBAAK3C,IAAA,CAACS,IAAI,EAACC,CAAC,CAAEiC,CAAE,CAAChC,CAAC,CAAE+B,CAAE,CAAC9B,CAAC,CAAE6B,CAAE,EAAG,GAAE,GAAC,cAErEzC,IAAA,CAACiB,MAAM,EAACC,QAAQ,CAAEA,QAAS,CAACC,QAAQ,CAAEU,MAAM,CAACV,QAAS,EAAG,cAEzDnB,IAAA,CAACK,QAAQ,EAACE,OAAO,CAAE,CAACW,QAAQ,CAAE,EAAG,GAC9B,EACC,CACR,CAAC,CAED,cAAe,CAAAS,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}