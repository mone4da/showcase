{"ast":null,"code":"import _classCallCheck from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport TextureNode from './TextureNode.js';\nimport UniformNode from '../core/UniformNode.js';\nimport ReflectNode from './ReflectNode.js';\nvar CubeTextureNode = /*#__PURE__*/function (_TextureNode) {\n  _inherits(CubeTextureNode, _TextureNode);\n  var _super = _createSuper(CubeTextureNode);\n  function CubeTextureNode(value) {\n    var uvNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new ReflectNode();\n    var biasNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    _classCallCheck(this, CubeTextureNode);\n    return _super.call(this, value, uvNode, biasNode);\n  }\n  _createClass(CubeTextureNode, [{\n    key: \"getInputType\",\n    value: function getInputType() {\n      return 'cubeTexture';\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder, output) {\n      var texture = this.value;\n      if (!texture || texture.isCubeTexture !== true) {\n        throw new Error('CubeTextureNode: Need a three.js cube texture.');\n      }\n      var textureProperty = UniformNode.prototype.generate.call(this, builder, 'cubeTexture');\n      if (output === 'sampler') {\n        return textureProperty + '_sampler';\n      } else if (builder.isReference(output)) {\n        return textureProperty;\n      } else {\n        var nodeData = builder.getDataFromNode(this);\n        var snippet = nodeData.snippet;\n        if (snippet === undefined) {\n          var uvSnippet = this.uvNode.build(builder, 'vec3');\n          var biasNode = this.biasNode;\n          if (biasNode !== null) {\n            var biasSnippet = biasNode.build(builder, 'float');\n            snippet = builder.getCubeTextureBias(textureProperty, uvSnippet, biasSnippet);\n          } else {\n            snippet = builder.getCubeTexture(textureProperty, uvSnippet);\n          }\n          nodeData.snippet = snippet;\n        }\n        return builder.format(snippet, 'vec4', output);\n      }\n    }\n  }]);\n  return CubeTextureNode;\n}(TextureNode);\nCubeTextureNode.prototype.isCubeTextureNode = true;\nexport default CubeTextureNode;","map":{"version":3,"names":["TextureNode","UniformNode","ReflectNode","CubeTextureNode","_TextureNode","_inherits","_super","_createSuper","value","uvNode","arguments","length","undefined","biasNode","_classCallCheck","call","_createClass","key","getInputType","generate","builder","output","texture","isCubeTexture","Error","textureProperty","prototype","isReference","nodeData","getDataFromNode","snippet","uvSnippet","build","biasSnippet","getCubeTextureBias","getCubeTexture","format","isCubeTextureNode"],"sources":["/home/samuel/experiment/3d/farm/frontend/node_modules/three-stdlib/nodes/accessors/CubeTextureNode.js"],"sourcesContent":["import TextureNode from './TextureNode.js';\nimport UniformNode from '../core/UniformNode.js';\nimport ReflectNode from './ReflectNode.js';\n\nclass CubeTextureNode extends TextureNode {\n  constructor(value, uvNode = new ReflectNode(), biasNode = null) {\n    super(value, uvNode, biasNode);\n  }\n\n  getInputType() {\n    return 'cubeTexture';\n  }\n\n  generate(builder, output) {\n    const texture = this.value;\n\n    if (!texture || texture.isCubeTexture !== true) {\n      throw new Error('CubeTextureNode: Need a three.js cube texture.');\n    }\n\n    const textureProperty = UniformNode.prototype.generate.call(this, builder, 'cubeTexture');\n\n    if (output === 'sampler') {\n      return textureProperty + '_sampler';\n    } else if (builder.isReference(output)) {\n      return textureProperty;\n    } else {\n      const nodeData = builder.getDataFromNode(this);\n      let snippet = nodeData.snippet;\n\n      if (snippet === undefined) {\n        const uvSnippet = this.uvNode.build(builder, 'vec3');\n        const biasNode = this.biasNode;\n\n        if (biasNode !== null) {\n          const biasSnippet = biasNode.build(builder, 'float');\n          snippet = builder.getCubeTextureBias(textureProperty, uvSnippet, biasSnippet);\n        } else {\n          snippet = builder.getCubeTexture(textureProperty, uvSnippet);\n        }\n\n        nodeData.snippet = snippet;\n      }\n\n      return builder.format(snippet, 'vec4', output);\n    }\n  }\n\n}\n\nCubeTextureNode.prototype.isCubeTextureNode = true;\n\nexport default CubeTextureNode;\n"],"mappings":";;;;AAAA,OAAOA,WAAW,MAAM,kBAAkB;AAC1C,OAAOC,WAAW,MAAM,wBAAwB;AAChD,OAAOC,WAAW,MAAM,kBAAkB;AAAC,IAErCC,eAAe,0BAAAC,YAAA;EAAAC,SAAA,CAAAF,eAAA,EAAAC,YAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,eAAA;EACnB,SAAAA,gBAAYK,KAAK,EAA+C;IAAA,IAA7CC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAIR,WAAW,EAAE;IAAA,IAAEW,QAAQ,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAAAI,eAAA,OAAAX,eAAA;IAAA,OAAAG,MAAA,CAAAS,IAAA,OACtDP,KAAK,EAAEC,MAAM,EAAEI,QAAQ;EAC/B;EAACG,YAAA,CAAAb,eAAA;IAAAc,GAAA;IAAAT,KAAA,EAED,SAAAU,aAAA,EAAe;MACb,OAAO,aAAa;IACtB;EAAC;IAAAD,GAAA;IAAAT,KAAA,EAED,SAAAW,SAASC,OAAO,EAAEC,MAAM,EAAE;MACxB,IAAMC,OAAO,GAAG,IAAI,CAACd,KAAK;MAE1B,IAAI,CAACc,OAAO,IAAIA,OAAO,CAACC,aAAa,KAAK,IAAI,EAAE;QAC9C,MAAM,IAAIC,KAAK,CAAC,gDAAgD,CAAC;MACnE;MAEA,IAAMC,eAAe,GAAGxB,WAAW,CAACyB,SAAS,CAACP,QAAQ,CAACJ,IAAI,CAAC,IAAI,EAAEK,OAAO,EAAE,aAAa,CAAC;MAEzF,IAAIC,MAAM,KAAK,SAAS,EAAE;QACxB,OAAOI,eAAe,GAAG,UAAU;MACrC,CAAC,MAAM,IAAIL,OAAO,CAACO,WAAW,CAACN,MAAM,CAAC,EAAE;QACtC,OAAOI,eAAe;MACxB,CAAC,MAAM;QACL,IAAMG,QAAQ,GAAGR,OAAO,CAACS,eAAe,CAAC,IAAI,CAAC;QAC9C,IAAIC,OAAO,GAAGF,QAAQ,CAACE,OAAO;QAE9B,IAAIA,OAAO,KAAKlB,SAAS,EAAE;UACzB,IAAMmB,SAAS,GAAG,IAAI,CAACtB,MAAM,CAACuB,KAAK,CAACZ,OAAO,EAAE,MAAM,CAAC;UACpD,IAAMP,QAAQ,GAAG,IAAI,CAACA,QAAQ;UAE9B,IAAIA,QAAQ,KAAK,IAAI,EAAE;YACrB,IAAMoB,WAAW,GAAGpB,QAAQ,CAACmB,KAAK,CAACZ,OAAO,EAAE,OAAO,CAAC;YACpDU,OAAO,GAAGV,OAAO,CAACc,kBAAkB,CAACT,eAAe,EAAEM,SAAS,EAAEE,WAAW,CAAC;UAC/E,CAAC,MAAM;YACLH,OAAO,GAAGV,OAAO,CAACe,cAAc,CAACV,eAAe,EAAEM,SAAS,CAAC;UAC9D;UAEAH,QAAQ,CAACE,OAAO,GAAGA,OAAO;QAC5B;QAEA,OAAOV,OAAO,CAACgB,MAAM,CAACN,OAAO,EAAE,MAAM,EAAET,MAAM,CAAC;MAChD;IACF;EAAC;EAAA,OAAAlB,eAAA;AAAA,EA1C2BH,WAAW;AA8CzCG,eAAe,CAACuB,SAAS,CAACW,iBAAiB,GAAG,IAAI;AAElD,eAAelC,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}