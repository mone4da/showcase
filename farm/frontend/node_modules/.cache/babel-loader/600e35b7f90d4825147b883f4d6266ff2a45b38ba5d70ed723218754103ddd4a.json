{"ast":null,"code":"import _classCallCheck from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { UniformsUtils, ShaderMaterial } from 'three';\nimport { HalftoneShader } from '../shaders/HalftoneShader.js';\n\n/**\n * RGB Halftone pass for three.js effects composer. Requires HalftoneShader.\n */\nvar HalftonePass = /*#__PURE__*/function (_Pass) {\n  _inherits(HalftonePass, _Pass);\n  var _super = _createSuper(HalftonePass);\n  function HalftonePass(width, height, params) {\n    var _this;\n    _classCallCheck(this, HalftonePass);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"material\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"fsQuad\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"uniforms\", void 0);\n    if (HalftoneShader === undefined) {\n      console.error('THREE.HalftonePass requires HalftoneShader');\n    }\n    _this.uniforms = UniformsUtils.clone(HalftoneShader.uniforms);\n    _this.material = new ShaderMaterial({\n      uniforms: _this.uniforms,\n      fragmentShader: HalftoneShader.fragmentShader,\n      vertexShader: HalftoneShader.vertexShader\n    }); // set params\n\n    _this.uniforms.width.value = width;\n    _this.uniforms.height.value = height;\n    for (var key in params) {\n      if (params.hasOwnProperty(key) && _this.uniforms.hasOwnProperty(key)) {\n        _this.uniforms[key].value = params[key];\n      }\n    }\n    _this.fsQuad = new FullScreenQuad(_this.material);\n    return _this;\n  }\n  _createClass(HalftonePass, [{\n    key: \"render\",\n    value: function render(renderer, writeBuffer, readBuffer\n    /*, deltaTime, maskActive */) {\n      this.material.uniforms['tDiffuse'].value = readBuffer.texture;\n      if (this.renderToScreen) {\n        renderer.setRenderTarget(null);\n        this.fsQuad.render(renderer);\n      } else {\n        renderer.setRenderTarget(writeBuffer);\n        if (this.clear) renderer.clear();\n        this.fsQuad.render(renderer);\n      }\n    }\n  }, {\n    key: \"setSize\",\n    value: function setSize(width, height) {\n      this.uniforms.width.value = width;\n      this.uniforms.height.value = height;\n    }\n  }]);\n  return HalftonePass;\n}(Pass);\nexport { HalftonePass };","map":{"version":3,"names":["_defineProperty","Pass","FullScreenQuad","UniformsUtils","ShaderMaterial","HalftoneShader","HalftonePass","_Pass","_inherits","_super","_createSuper","width","height","params","_this","_classCallCheck","call","_assertThisInitialized","undefined","console","error","uniforms","clone","material","fragmentShader","vertexShader","value","key","hasOwnProperty","fsQuad","_createClass","render","renderer","writeBuffer","readBuffer","texture","renderToScreen","setRenderTarget","clear","setSize"],"sources":["/home/samuel/experiment/3d/farm/frontend/node_modules/three-stdlib/postprocessing/HalftonePass.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { UniformsUtils, ShaderMaterial } from 'three';\nimport { HalftoneShader } from '../shaders/HalftoneShader.js';\n\n/**\n * RGB Halftone pass for three.js effects composer. Requires HalftoneShader.\n */\nclass HalftonePass extends Pass {\n  constructor(width, height, params) {\n    super();\n\n    _defineProperty(this, \"material\", void 0);\n\n    _defineProperty(this, \"fsQuad\", void 0);\n\n    _defineProperty(this, \"uniforms\", void 0);\n\n    if (HalftoneShader === undefined) {\n      console.error('THREE.HalftonePass requires HalftoneShader');\n    }\n\n    this.uniforms = UniformsUtils.clone(HalftoneShader.uniforms);\n    this.material = new ShaderMaterial({\n      uniforms: this.uniforms,\n      fragmentShader: HalftoneShader.fragmentShader,\n      vertexShader: HalftoneShader.vertexShader\n    }); // set params\n\n    this.uniforms.width.value = width;\n    this.uniforms.height.value = height;\n\n    for (const key in params) {\n      if (params.hasOwnProperty(key) && this.uniforms.hasOwnProperty(key)) {\n        this.uniforms[key].value = params[key];\n      }\n    }\n\n    this.fsQuad = new FullScreenQuad(this.material);\n  }\n\n  render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    this.material.uniforms['tDiffuse'].value = readBuffer.texture;\n\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer);\n      if (this.clear) renderer.clear();\n      this.fsQuad.render(renderer);\n    }\n  }\n\n  setSize(width, height) {\n    this.uniforms.width.value = width;\n    this.uniforms.height.value = height;\n  }\n\n}\n\nexport { HalftonePass };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}