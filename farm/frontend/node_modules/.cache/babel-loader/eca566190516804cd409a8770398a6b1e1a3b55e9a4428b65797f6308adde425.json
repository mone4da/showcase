{"ast":null,"code":"import _slicedToArray from\"/home/samuel/experiment/3d/farm/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{OrbitControls,PerspectiveCamera}from'@react-three/drei';import{useState}from'react';import useKeyboard from'./useKeyboard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var control={target:[0,.35,0],angle:1.45};var camera={fov:50,position:[3,2,5]};var space=[4,1,4];var material={color:'#00FF00'};var Wall=function Wall(props){var x=props.x,h=props.h,z=props.z;return/*#__PURE__*/_jsxs(\"mesh\",{position:[x,0,z],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[1,.4*h,1]}),/*#__PURE__*/_jsx(\"meshBasicMaterial\",{color:h?'green':'orange'})]});};var Target=function Target(props){var data=props.data;return/*#__PURE__*/_jsxs(\"mesh\",{position:[data.position.x,0,data.position.z],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[.3,.3,.3]}),/*#__PURE__*/_jsx(\"meshBasicMaterial\",{color:data.material.color})]});};var Player=function Player(props){var position=props.position,material=props.material;return/*#__PURE__*/_jsxs(\"mesh\",{position:[position.x,0,position.z],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[.3,.3,.3]}),/*#__PURE__*/_jsx(\"meshBasicMaterial\",{color:material.color})]});};var Impact=function Impact(props){var data=props.data;return/*#__PURE__*/_jsxs(\"mesh\",{position:[data.position.x,0,data.position.z],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[.3,.3,.3]}),/*#__PURE__*/_jsx(\"meshBasicMaterial\",{color:data.material.color})]});};var Chicken=function Chicken(props){var data=props.data;return/*#__PURE__*/_jsxs(\"mesh\",{position:[data.position.x,0,data.position.z],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[.3,.3,.3]}),/*#__PURE__*/_jsx(\"meshBasicMaterial\",{color:data.material.color})]});};var moveTo=function moveTo(data,code,p){var tryPosition=function tryPosition(old,p){return data[p.z][p.x]?old:p;};switch(code){case'ArrowUp':return tryPosition(p,{x:p.x,z:p.z+1});case'ArrowDown':return tryPosition(p,{x:p.x,z:p.z-1});case'ArrowLeft':return tryPosition(p,{x:p.x-1,z:p.z});case'ArrowRight':return tryPosition(p,{x:p.x+1,z:p.z});default:return p;}};var Maze=function Maze(props){var data=props.data,player=props.player,targets=props.targets,chickens=props.chickens,impacts=props.impacts;var _useState=useState(player.position),_useState2=_slicedToArray(_useState,2),position=_useState2[0],setPosition=_useState2[1];useKeyboard(function(code){return setPosition(function(p){return moveTo(data,code,p);});});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(OrbitControls,{target:control.target,maxPolarAngle:control.angle,enableDamping:false}),/*#__PURE__*/_jsx(PerspectiveCamera,{makeDefault:true,fov:camera.fov,position:camera.position}),data.map(function(row,r){return row.map(function(w,c){return/*#__PURE__*/_jsx(Wall,{x:c,h:w,z:r});});}),targets.map(function(data){return/*#__PURE__*/_jsx(Target,{data:data});}),chickens.map(function(data){return/*#__PURE__*/_jsx(Chicken,{data:data});}),impacts.map(function(data){return/*#__PURE__*/_jsx(Impact,{data:data});}),/*#__PURE__*/_jsx(Player,{position:position,material:player.material})]});};export default Maze;","map":{"version":3,"names":["OrbitControls","PerspectiveCamera","useState","useKeyboard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","control","target","angle","camera","fov","position","space","material","color","Wall","props","x","h","z","children","args","Target","data","Player","Impact","Chicken","moveTo","code","p","tryPosition","old","Maze","player","targets","chickens","impacts","_useState","_useState2","_slicedToArray","setPosition","maxPolarAngle","enableDamping","makeDefault","map","row","r","w","c"],"sources":["/home/samuel/experiment/3d/farm/frontend/src/view/maze.js"],"sourcesContent":["import {OrbitControls, PerspectiveCamera} from '@react-three/drei'\nimport {useState} from 'react'\n\nimport useKeyboard from './useKeyboard'\n\nlet control = {\n\ttarget : [0, .35, 0],\n\tangle: 1.45\n}\n\nlet camera = {\n\tfov: 50,\n\tposition : [3, 2, 5]\n}\n\nlet space = [4, 1, 4]\n\nlet material = {\n\tcolor: '#00FF00'\n}\n\nconst Wall = props => {\n\t\tlet {x,h,z} = props\n\nreturn\t<mesh position={[x,0,z]}>\n\t\t<boxGeometry args={ [1,.4*h,1] } />\n\t\t<meshBasicMaterial color={h ? 'green' : 'orange'} />\n\t</mesh>\n\n}\n\nconst Target = props => {\n\t\tlet {data} = props\n\n\treturn\t<mesh position={[data.position.x,0,data.position.z]}>\n\t\t\t<boxGeometry args={ [.3,.3,.3] } />\n\t\t\t<meshBasicMaterial color={data.material.color} />\n\t\t</mesh>\n\t}\n\nconst Player = props => {\n\t\tlet {position, material} = props\n\n\treturn\t<mesh position={[position.x,0,position.z]}>\n\t\t\t<boxGeometry args={ [.3,.3,.3] } />\n\t\t\t<meshBasicMaterial color={material.color} />\n\t\t</mesh>\n}\n\nconst Impact = props => {\n\t\tlet {data} = props\n\n\treturn\t<mesh position={[data.position.x,0,data.position.z]}>\n\t\t\t<boxGeometry args={ [.3,.3,.3] } />\n\t\t\t<meshBasicMaterial color={data.material.color} />\n\t\t</mesh>\n}\n\nconst Chicken = props => {\n\t\tlet {data} = props\n\n\treturn\t<mesh position={[data.position.x,0,data.position.z]}>\n\t\t\t<boxGeometry args={ [.3,.3,.3] } />\n\t\t\t<meshBasicMaterial color={data.material.color} />\n\t\t</mesh>\n}\n\nlet moveTo = (data, code, p) => {\n\tlet tryPosition = (old, p) => data[p.z][p.x] ? old : p\n\n\tswitch(code){\n\t\tcase 'ArrowUp' : return tryPosition(p, {x: p.x, z: p.z + 1})\n\t\tcase 'ArrowDown' : return tryPosition(p, {x: p.x, z: p.z -1})\n\t\tcase 'ArrowLeft' : return tryPosition(p, {x: p.x - 1, z: p.z})\n\t\tcase 'ArrowRight' : return tryPosition(p, {x: p.x + 1, z: p.z})\n\t\tdefault : return p\n\t}\n}\n\nconst Maze = props => {\n\tlet {data, player, targets, chickens, impacts} = props\n\n\tlet [position, setPosition] = useState(player.position)\n\n\tuseKeyboard(\n\t\tcode  => setPosition(p => moveTo(data, code, p))\n\t)\n\n\treturn <>\n\t\t\t<OrbitControls target={control.target} maxPolarAngle={control.angle} enableDamping={false} />\n\t\t\t<PerspectiveCamera makeDefault fov={camera.fov} position={camera.position} />\n\n\t\t\t{ data.map( (row, r) => row.map((w,c) => <Wall x={c} h={w} z={r} /> )) }\n\n\t\t\t{ targets.map(data => <Target data={data} /> ) }\n\n\t\t\t{ chickens.map(data => <Chicken data={data} /> ) }\n\n\t\t\t{ impacts.map(data => <Impact data={data} /> ) }\n\n\t\t\t<Player position={position} material={player.material} />\n\n\t\t</>\n}\n\nexport default Maze\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}