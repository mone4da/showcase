{"ast":null,"code":"import _toArray from\"/home/samuel/dev/4daos/cameleon/frontend/node_modules/@babel/runtime/helpers/esm/toArray.js\";import _classCallCheck from\"/home/samuel/dev/4daos/cameleon/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samuel/dev/4daos/cameleon/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Interpreter=/*#__PURE__*/function(){function Interpreter(language,contexts){_classCallCheck(this,Interpreter);this.language=language;this.contexts=contexts||{};}_createClass(Interpreter,[{key:\"build\",value:function build(statement){return this.analyze(this.parse(statement.trim()));}},{key:\"parse\",value:function parse(string){var lines=string.split('\\n');if(!lines.length)return null;var _lines$0$split=lines[0].split(' '),_lines$0$split2=_toArray(_lines$0$split),context=_lines$0$split2[0],command=_lines$0$split2[1],params=_lines$0$split2.slice(2);return{context:context,command:command,params:params,options:lines.slice(1)};}},{key:\"analyze\",value:function analyze(structure){var _this$language$types$;var context=structure.context,command=structure.command,params=structure.params,options=structure.options;var ctx=this.contexts[context];if(!ctx)return this.error('nocontext',structure);var cmd=(_this$language$types$=this.language.types[ctx.type])===null||_this$language$types$===void 0?void 0:_this$language$types$.commands[command];if(!cmd)return this.error('nocommand',structure);var opts=options&&options.map(function(item){return item.split('=');}).reduce(function(list,item){list[item[0].trim()]=item[1].trim();return list;},{});return{status:0,context:ctx,command:cmd,params:params,options:opts||{}};}},{key:\"error\",value:function error(type,data,status){return{status:status||666,type:type,data:data};}}]);return Interpreter;}();export default Interpreter;","map":{"version":3,"names":["Interpreter","language","contexts","_classCallCheck","_createClass","key","value","build","statement","analyze","parse","trim","string","lines","split","length","_lines$0$split","_lines$0$split2","_toArray","context","command","params","slice","options","structure","_this$language$types$","ctx","error","cmd","types","type","commands","opts","map","item","reduce","list","status","data"],"sources":["/home/samuel/dev/4daos/cameleon/frontend/src/model/interpreter.js"],"sourcesContent":["\nclass Interpreter{\n\tconstructor(language, contexts){\n\t\tthis.language =  language\n\t\tthis.contexts = contexts || {}\n\t}\n\n\tbuild(statement){\n\t\treturn this.analyze(\n\t\t\t\tthis.parse(statement.trim())\n\t\t\t)\n\t}\n\n\tparse(string){\n\t\tlet lines = string.split('\\n')\n\t\tif (!lines.length)\n\t\t\treturn null\n\n\t\tlet [context, command, ...params] = lines[0].split(' ')\n\n\t\treturn {\n\t\t\tcontext,\n\t\t\tcommand,\n\t\t\tparams,\n\t\t\toptions : lines.slice(1)\n\t\t}\n\t}\n\n\tanalyze(structure){\n\t\tlet {context, command, params, options} = structure\n\n\t\tlet ctx = this.contexts[context]\n\t\tif (!ctx)\n\t\t\treturn this.error('nocontext',structure)\n\n\t\tlet cmd = this.language.types[ctx.type]?.commands[command]\n\t\tif (!cmd)\n\t\t\treturn this.error('nocommand', structure)\n\n\t\tlet opts = options && options\n\t\t\t\t.map(item => item.split('='))\n\t\t\t\t.reduce((list, item) => {\n\t\t\t\t\tlist[item[0].trim()] = item[1].trim()\n\t\t\t\t\treturn list\n\t\t\t\t\t}, {})\n\n\t\treturn {\n\t\t\tstatus: 0,\n\t\t\tcontext: ctx,\n\t\t\tcommand: cmd,\n\t\t\tparams,\n\t\t\toptions : opts || {}\n\t\t}\n\t}\n\n\terror(type, data, status){\n\t\treturn {\n\t\t\tstatus: status || 666,\n\t\t\ttype,\n\t\t\tdata\n\t\t}\n\t}\n\n}\n\nexport default Interpreter\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}