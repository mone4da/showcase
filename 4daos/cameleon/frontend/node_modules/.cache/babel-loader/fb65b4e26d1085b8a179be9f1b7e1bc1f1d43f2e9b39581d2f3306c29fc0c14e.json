{"ast":null,"code":"import _slicedToArray from\"/home/samuel/dev/4daos/cameleon/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import Cli from'./cli';import Histogram from'./histogram';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var availableTypes=['histogram','cli'];var defaultPosition={x:200,y:200};var renderApp=function renderApp(name,Component,event,asset,offset,onFocused,onDragged,onClose,onCommand){switch(name){case'cli':return/*#__PURE__*/_jsx(Cli,{Component:Component,event:event,asset:asset.cli,offset:offset,onFocused:onFocused,onDragged:onDragged,onClose:onClose,onCommand:onCommand});case'histogram':return/*#__PURE__*/_jsx(Histogram,{Component:Component,event:event,asset:asset.cli,offset:offset,onFocused:onFocused,onDragged:onDragged,onClose:onClose});}return null;};var AppManager=function AppManager(props){var types=props.types,Component=props.Component,state=props.state,asset=props.asset,style=props.style,onUpdate=props.onUpdate,event=props.event,onFocused=props.onFocused,onClose=props.onClose,onCommand=props.onCommand;var _useState=useState(Object.fromEntries(availableTypes.map(function(type){return[type,defaultPosition];}))),_useState2=_slicedToArray(_useState,2),positions=_useState2[0],setPositions=_useState2[1];var handleFocused=function handleFocused(id,offset){onFocused&&onFocused(id,offset);};var handleDragged=function handleDragged(id,offset){setPositions(function(positions){positions[id]=offset;return positions;});};var handleClose=function handleClose(id){setPositions(function(positions){positions[id]=defaultPosition;return positions;});onClose&&onClose(id);};var handleCommand=function handleCommand(data){onCommand&&onCommand(data);};return/*#__PURE__*/_jsx(_Fragment,{children:types.map(function(id){return renderApp(id,Component,event,asset,positions[id],function(){return handleFocused(id);},function(offset){return handleDragged(id,offset);},function(){return handleClose(id);},function(data){return handleCommand(data);});})});};export default AppManager;","map":{"version":3,"names":["useState","Cli","Histogram","jsx","_jsx","Fragment","_Fragment","availableTypes","defaultPosition","x","y","renderApp","name","Component","event","asset","offset","onFocused","onDragged","onClose","onCommand","cli","AppManager","props","types","state","style","onUpdate","_useState","Object","fromEntries","map","type","_useState2","_slicedToArray","positions","setPositions","handleFocused","id","handleDragged","handleClose","handleCommand","data","children"],"sources":["/home/samuel/dev/4daos/cameleon/frontend/src/view/appmanager.js"],"sourcesContent":["import {useState} from 'react'\nimport Cli from './cli'\nimport Histogram from './histogram'\n\nconst availableTypes = ['histogram','cli']\n\nconst defaultPosition = {x: 200, y: 200}\n\nlet renderApp = (name, Component, event, asset, offset, onFocused, onDragged, onClose, onCommand) => {\n\tswitch(name){\n\t\tcase 'cli' : return <Cli Component={Component} event={event} asset = {asset.cli}  offset={offset}  onFocused={onFocused} onDragged={onDragged} onClose={onClose} onCommand={onCommand}/>\n\t\tcase 'histogram' : return <Histogram Component={Component} event={event} asset = {asset.cli}  offset={offset}  onFocused={onFocused} onDragged={onDragged} onClose={onClose} />\n\t}\n\n\treturn null\n}\n\nlet AppManager = props => {\n\tlet {\n\t\ttypes,\n\t\tComponent,\n\t\tstate,\n\t\tasset,\n\t\tstyle,\n\t\tonUpdate,\n\t\tevent,\n\t\tonFocused,\n\t\tonClose,\n\t\tonCommand} = props\n\n\tlet [positions, setPositions] = useState( Object.fromEntries( availableTypes.map(type => [type, defaultPosition]) ) )\n\n\n\tlet handleFocused = (id, offset) => {\n\t\tonFocused && onFocused(id, offset)\n\t}\n\n\tlet handleDragged = (id, offset) => {\n\t\tsetPositions( positions => {\n\t\t\tpositions[id] = offset\n\t\t\treturn positions\n\t\t})\n\t}\n\n\tlet handleClose = id => {\n\n\t\tsetPositions( positions => {\n\t\t\tpositions[id] = defaultPosition\n\t\t\treturn positions\n\t\t})\n\n\t\tonClose && onClose(id)\n\t}\n\n\tlet handleCommand = data => {\n\t\tonCommand && onCommand(data)\n\t}\n\n\treturn <>{types.map(id => renderApp(\n\t\t\t\t\tid,\n\t\t\t\t\tComponent,\n\t\t\t\t\tevent,\n\t\t\t\t\tasset,\n\t\t\t\t\tpositions[id],\n\t\t\t\t\t() => handleFocused(id),\n\t\t\t\t\toffset => handleDragged(id, offset),\n\t\t\t\t\t() => handleClose(id),\n\t\t\t\t\tdata => handleCommand(data)\n\t\t\t\t)\n\t\t\t)}</>\n\n}\n\nexport default  AppManager\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}