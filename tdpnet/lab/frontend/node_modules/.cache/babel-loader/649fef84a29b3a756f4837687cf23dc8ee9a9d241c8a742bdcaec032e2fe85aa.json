{"ast":null,"code":"import _toConsumableArray from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import state from'./state';import Session from'./session';var max=function max(list){return list.reduce(function(max,a){return a>max?a:max;});};var Model=/*#__PURE__*/function(_Session){_inherits(Model,_Session);var _super=_createSuper(Model);function Model(initialized){var _this;_classCallCheck(this,Model);_this=_super.call(this);_this.state=state;_this.initialize(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.rest.data();case 2:config=_context.sent;_this.state.data=config.data;console.log(_this.state.data);case 5:case\"end\":return _context.stop();}},_callee);})));return _this;}_createClass(Model,[{key:\"onWelcome\",value:function onWelcome(msg){this.state.user.token=msg.data;console.log('welcome!!',this.state.user.token);this.notify(msg.timestamp,'token');}},{key:\"onData\",value:function onData(msg){var index=msg.channel;var data=this.state.system.data[index];this.state.system.data[index]=[msg.latency].concat(_toConsumableArray(data.slice(0,data.length-1)));this.notify(Date.now(),'data');}},{key:\"notify\",value:function notify(data,id){this.onUpdate&&this.onUpdate(data,id);}//methods\n},{key:\"update\",value:function update(data,id){switch(id){}}}]);return Model;}(Session);export default Model;","map":{"version":3,"names":["state","Session","max","list","reduce","a","Model","_Session","_inherits","_super","_createSuper","initialized","_this","_classCallCheck","call","initialize","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","wrap","_callee$","_context","prev","next","rest","data","sent","console","log","stop","_createClass","key","value","onWelcome","msg","user","token","notify","timestamp","onData","index","channel","system","latency","concat","_toConsumableArray","slice","length","Date","now","id","onUpdate","update"],"sources":["/home/samuel/experiment/tdpnet/lab/frontend/src/model/index.js"],"sourcesContent":["import state from './state'\nimport Session from './session'\n\nconst max = list => list.reduce((max,a) => a > max ? a : max)\n\nclass Model extends Session{\n\tconstructor( initialized ){\n\t\tsuper()\n\t\tthis.state = state\n\n\t\tthis.initialize( async ()=> {\n\t\t\tlet config = await this.rest.data()\n\n\t\t\tthis.state.data = config.data\n\t\t\tconsole.log(this.state.data)\n\t\t})\n\t}\n\n\tonWelcome(msg){\n\t\tthis.state.user.token = msg.data\n\t\tconsole.log('welcome!!', this.state.user.token)\n\t\tthis.notify(msg.timestamp, 'token')\n\t}\n\n\tonData(msg){\n\t\tlet index = msg.channel\n\n\t\tlet data = this.state.system.data[index]\n\t\tthis.state.system.data[index] = [msg.latency,...data.slice(0,data.length-1)]\n\n\t\tthis.notify(Date.now(), 'data')\n\t}\n\n\tnotify(data, id){\n\t\tthis.onUpdate && this.onUpdate(data, id)\n\t}\n\n\t//methods\n\tupdate(data, id){\n\t\tswitch(id){\n\t \t}\n\t}\n\n}\n\nexport default Model\n"],"mappings":"+4BAAA,MAAO,CAAAA,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAE/B,GAAM,CAAAC,GAAG,CAAG,QAAN,CAAAA,GAAGA,CAAGC,IAAI,QAAI,CAAAA,IAAI,CAACC,MAAM,CAAC,SAACF,GAAG,CAACG,CAAC,QAAK,CAAAA,CAAC,CAAGH,GAAG,CAAGG,CAAC,CAAGH,GAAG,GAAC,MAEvD,CAAAI,KAAK,uBAAAC,QAAA,EAAAC,SAAA,CAAAF,KAAA,CAAAC,QAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,KAAA,EACV,SAAAA,MAAaK,WAAW,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,KAAA,EACzBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,OACAF,KAAA,CAAKZ,KAAK,CAAGA,KAAK,CAElBY,KAAA,CAAKG,UAAU,cAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAC,QAAA,MAAAC,MAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACG,CAAAb,KAAA,CAAKc,IAAI,CAACC,IAAI,EAAE,QAA/BP,MAAM,CAAAG,QAAA,CAAAK,IAAA,CAEVhB,KAAA,CAAKZ,KAAK,CAAC2B,IAAI,CAAGP,MAAM,CAACO,IAAI,CAC7BE,OAAO,CAACC,GAAG,CAAClB,KAAA,CAAKZ,KAAK,CAAC2B,IAAI,CAAC,yBAAAJ,QAAA,CAAAQ,IAAA,MAAAZ,OAAA,GAC5B,GAAC,QAAAP,KAAA,CACH,CAACoB,YAAA,CAAA1B,KAAA,GAAA2B,GAAA,aAAAC,KAAA,CAED,SAAAC,UAAUC,GAAG,CAAC,CACb,IAAI,CAACpC,KAAK,CAACqC,IAAI,CAACC,KAAK,CAAGF,GAAG,CAACT,IAAI,CAChCE,OAAO,CAACC,GAAG,CAAC,WAAW,CAAE,IAAI,CAAC9B,KAAK,CAACqC,IAAI,CAACC,KAAK,CAAC,CAC/C,IAAI,CAACC,MAAM,CAACH,GAAG,CAACI,SAAS,CAAE,OAAO,CAAC,CACpC,CAAC,GAAAP,GAAA,UAAAC,KAAA,CAED,SAAAO,OAAOL,GAAG,CAAC,CACV,GAAI,CAAAM,KAAK,CAAGN,GAAG,CAACO,OAAO,CAEvB,GAAI,CAAAhB,IAAI,CAAG,IAAI,CAAC3B,KAAK,CAAC4C,MAAM,CAACjB,IAAI,CAACe,KAAK,CAAC,CACxC,IAAI,CAAC1C,KAAK,CAAC4C,MAAM,CAACjB,IAAI,CAACe,KAAK,CAAC,EAAIN,GAAG,CAACS,OAAO,EAAAC,MAAA,CAAAC,kBAAA,CAAIpB,IAAI,CAACqB,KAAK,CAAC,CAAC,CAACrB,IAAI,CAACsB,MAAM,CAAC,CAAC,CAAC,EAAC,CAE5E,IAAI,CAACV,MAAM,CAACW,IAAI,CAACC,GAAG,EAAE,CAAE,MAAM,CAAC,CAChC,CAAC,GAAAlB,GAAA,UAAAC,KAAA,CAED,SAAAK,OAAOZ,IAAI,CAAEyB,EAAE,CAAC,CACf,IAAI,CAACC,QAAQ,EAAI,IAAI,CAACA,QAAQ,CAAC1B,IAAI,CAAEyB,EAAE,CAAC,CACzC,CAEA;AAAA,GAAAnB,GAAA,UAAAC,KAAA,CACA,SAAAoB,OAAO3B,IAAI,CAAEyB,EAAE,CAAC,CACf,OAAOA,EAAE,GAEV,CAAC,WAAA9C,KAAA,GApCkBL,OAAO,EAwC3B,cAAe,CAAAK,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}