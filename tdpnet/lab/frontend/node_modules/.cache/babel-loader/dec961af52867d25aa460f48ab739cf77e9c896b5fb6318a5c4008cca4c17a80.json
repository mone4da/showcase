{"ast":null,"code":"import _toConsumableArray from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/samuel/experiment/tdpnet/lab/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import state from'./state';import Session from'./session';var max=function max(list){return list.reduce(function(max,a){return a>max?a:max;});};var Model=/*#__PURE__*/function(_Session){_inherits(Model,_Session);var _super=_createSuper(Model);function Model(initialized){var _this;_classCallCheck(this,Model);_this=_super.call(this);_this.state=state;_this.initialize(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log('initializing');_context.next=3;return _this.rest.data().data;case 3:_this.state.data=_context.sent;console.log(_this.state.data);case 5:case\"end\":return _context.stop();}},_callee);})));return _this;}_createClass(Model,[{key:\"onWelcome\",value:function onWelcome(msg){this.state.user.token=msg.data;console.log('welcome!!',this.state.user.token);this.notify(msg.timestamp,'token');}},{key:\"onData\",value:function onData(msg){var index=msg.channel;var data=this.state.system.data[index];this.state.system.data[index]=[msg.latency].concat(_toConsumableArray(data.slice(0,data.length-1)));this.notify(Date.now(),'data');}},{key:\"notify\",value:function notify(data,id){this.onUpdate&&this.onUpdate(data,id);}//methods\n},{key:\"update\",value:function update(data,id){switch(id){}}}]);return Model;}(Session);export default Model;","map":{"version":3,"names":["state","Session","max","list","reduce","a","Model","_Session","_inherits","_super","_createSuper","initialized","_this","_classCallCheck","call","initialize","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","console","log","rest","data","sent","stop","_createClass","key","value","onWelcome","msg","user","token","notify","timestamp","onData","index","channel","system","latency","concat","_toConsumableArray","slice","length","Date","now","id","onUpdate","update"],"sources":["/home/samuel/experiment/tdpnet/lab/frontend/src/model/index.js"],"sourcesContent":["import state from './state'\nimport Session from './session'\n\nconst max = list => list.reduce((max,a) => a > max ? a : max)\n\nclass Model extends Session{\n\tconstructor( initialized ){\n\t\tsuper()\n\t\tthis.state = state\n\n\t\tthis.initialize( async ()=> {\n\t\t\tconsole.log('initializing')\n\t\t\tthis.state.data = await this.rest.data().data\n\t\t\tconsole.log(this.state.data)\n\t\t})\n\t}\n\n\tonWelcome(msg){\n\t\tthis.state.user.token = msg.data\n\t\tconsole.log('welcome!!', this.state.user.token)\n\t\tthis.notify(msg.timestamp, 'token')\n\t}\n\n\tonData(msg){\n\t\tlet index = msg.channel\n\n\t\tlet data = this.state.system.data[index]\n\t\tthis.state.system.data[index] = [msg.latency,...data.slice(0,data.length-1)]\n\n\t\tthis.notify(Date.now(), 'data')\n\t}\n\n\tnotify(data, id){\n\t\tthis.onUpdate && this.onUpdate(data, id)\n\t}\n\n\t//methods\n\tupdate(data, id){\n\t\tswitch(id){\n\t \t}\n\t}\n\n}\n\nexport default Model\n"],"mappings":"+4BAAA,MAAO,CAAAA,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAE/B,GAAM,CAAAC,GAAG,CAAG,QAAN,CAAAA,GAAGA,CAAGC,IAAI,QAAI,CAAAA,IAAI,CAACC,MAAM,CAAC,SAACF,GAAG,CAACG,CAAC,QAAK,CAAAA,CAAC,CAAGH,GAAG,CAAGG,CAAC,CAAGH,GAAG,GAAC,MAEvD,CAAAI,KAAK,uBAAAC,QAAA,EAAAC,SAAA,CAAAF,KAAA,CAAAC,QAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,KAAA,EACV,SAAAA,MAAaK,WAAW,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,KAAA,EACzBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,OACAF,KAAA,CAAKZ,KAAK,CAAGA,KAAK,CAElBY,KAAA,CAAKG,UAAU,cAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAC,QAAA,SAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAChBC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAAAJ,QAAA,CAAAE,IAAA,SACH,CAAAZ,KAAA,CAAKe,IAAI,CAACC,IAAI,EAAE,CAACA,IAAI,QAA7ChB,KAAA,CAAKZ,KAAK,CAAC4B,IAAI,CAAAN,QAAA,CAAAO,IAAA,CACfJ,OAAO,CAACC,GAAG,CAACd,KAAA,CAAKZ,KAAK,CAAC4B,IAAI,CAAC,yBAAAN,QAAA,CAAAQ,IAAA,MAAAX,OAAA,GAC5B,GAAC,QAAAP,KAAA,CACH,CAACmB,YAAA,CAAAzB,KAAA,GAAA0B,GAAA,aAAAC,KAAA,CAED,SAAAC,UAAUC,GAAG,CAAC,CACb,IAAI,CAACnC,KAAK,CAACoC,IAAI,CAACC,KAAK,CAAGF,GAAG,CAACP,IAAI,CAChCH,OAAO,CAACC,GAAG,CAAC,WAAW,CAAE,IAAI,CAAC1B,KAAK,CAACoC,IAAI,CAACC,KAAK,CAAC,CAC/C,IAAI,CAACC,MAAM,CAACH,GAAG,CAACI,SAAS,CAAE,OAAO,CAAC,CACpC,CAAC,GAAAP,GAAA,UAAAC,KAAA,CAED,SAAAO,OAAOL,GAAG,CAAC,CACV,GAAI,CAAAM,KAAK,CAAGN,GAAG,CAACO,OAAO,CAEvB,GAAI,CAAAd,IAAI,CAAG,IAAI,CAAC5B,KAAK,CAAC2C,MAAM,CAACf,IAAI,CAACa,KAAK,CAAC,CACxC,IAAI,CAACzC,KAAK,CAAC2C,MAAM,CAACf,IAAI,CAACa,KAAK,CAAC,EAAIN,GAAG,CAACS,OAAO,EAAAC,MAAA,CAAAC,kBAAA,CAAIlB,IAAI,CAACmB,KAAK,CAAC,CAAC,CAACnB,IAAI,CAACoB,MAAM,CAAC,CAAC,CAAC,EAAC,CAE5E,IAAI,CAACV,MAAM,CAACW,IAAI,CAACC,GAAG,EAAE,CAAE,MAAM,CAAC,CAChC,CAAC,GAAAlB,GAAA,UAAAC,KAAA,CAED,SAAAK,OAAOV,IAAI,CAAEuB,EAAE,CAAC,CACf,IAAI,CAACC,QAAQ,EAAI,IAAI,CAACA,QAAQ,CAACxB,IAAI,CAAEuB,EAAE,CAAC,CACzC,CAEA;AAAA,GAAAnB,GAAA,UAAAC,KAAA,CACA,SAAAoB,OAAOzB,IAAI,CAAEuB,EAAE,CAAC,CACf,OAAOA,EAAE,GAEV,CAAC,WAAA7C,KAAA,GAnCkBL,OAAO,EAuC3B,cAAe,CAAAK,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}