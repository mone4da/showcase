{"ast":null,"code":"import _regeneratorRuntime from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import Rest from'./rest';var Session=/*#__PURE__*/function(){function Session(){_classCallCheck(this,Session);}_createClass(Session,[{key:\"connect\",value:function connect(path){var _this=this;var source=new EventSource(path);source.addEventListener('message',function(msg){return _this.onMessage(msg.data);});}},{key:\"onMessage\",value:function onMessage(data){try{var msg=JSON.parse(data);console.log(msg);switch(msg.id){case'welcome':this.onWelcome(msg);break;case'data':this.onData(msg);break;}}catch(e){console.log(e);}}},{key:\"onWelcome\",value:function onWelcome(msg){}},{key:\"onData\",value:function onData(msg){}},{key:\"initialize\",value:function(){var _initialize=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(initialized){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:this.rest=new Rest();this.connect('/consumer');initialized(this);case 3:case\"end\":return _context.stop();}},_callee,this);}));function initialize(_x){return _initialize.apply(this,arguments);}return initialize;}()}]);return Session;}();export default Session;","map":{"version":3,"names":["Rest","Session","_classCallCheck","_createClass","key","value","connect","path","_this","source","EventSource","addEventListener","msg","onMessage","data","JSON","parse","console","log","id","onWelcome","onData","e","_initialize","_asyncToGenerator","_regeneratorRuntime","mark","_callee","initialized","wrap","_callee$","_context","prev","next","rest","stop","initialize","_x","apply","arguments"],"sources":["/home/samuel/experiment/latency/frontend/src/model/session.js"],"sourcesContent":["import Rest from './rest'\n\nclass Session{\n\tconstructor(){}\n\n\tconnect(path){\n\t\tlet source = new EventSource(path)\n\t\tsource.addEventListener('message', msg => this.onMessage(msg.data) )\n\t}\n\n\tonMessage(data){\n\t\ttry{\n\t\t\tlet msg = JSON.parse(data)\n\t\t\tconsole.log(msg)\n\t\t\tswitch(msg.id){\n\t\t\t\tcase 'welcome' : this.onWelcome(msg); break;\n\t\t\t\tcase 'data' : this.onData(msg); break;\n\t\t\t}\n\t\t}catch(e){\n\t\t\tconsole.log(e)\n\t\t}\n\t}\n\n\tonWelcome(msg){}\n\n\tonData(msg){}\n\n\tasync initialize(initialized ){\n\t\tthis.rest = new Rest()\n\n\t\tthis.connect('/consumer')\n\n\t\tinitialized( this )\n\t}\n\n}\n\nexport default Session\n"],"mappings":"sgBAAA,MAAO,CAAAA,IAAI,KAAM,QAAQ,IAEnB,CAAAC,OAAO,yBACZ,SAAAA,QAAA,CAAa,CAAAC,eAAA,MAAAD,OAAA,EAAC,CAACE,YAAA,CAAAF,OAAA,GAAAG,GAAA,WAAAC,KAAA,CAEf,SAAAC,QAAQC,IAAI,CAAC,KAAAC,KAAA,MACZ,GAAI,CAAAC,MAAM,CAAG,GAAI,CAAAC,WAAW,CAACH,IAAI,CAAC,CAClCE,MAAM,CAACE,gBAAgB,CAAC,SAAS,CAAE,SAAAC,GAAG,QAAI,CAAAJ,KAAI,CAACK,SAAS,CAACD,GAAG,CAACE,IAAI,CAAC,GAAE,CACrE,CAAC,GAAAV,GAAA,aAAAC,KAAA,CAED,SAAAQ,UAAUC,IAAI,CAAC,CACd,GAAG,CACF,GAAI,CAAAF,GAAG,CAAGG,IAAI,CAACC,KAAK,CAACF,IAAI,CAAC,CAC1BG,OAAO,CAACC,GAAG,CAACN,GAAG,CAAC,CAChB,OAAOA,GAAG,CAACO,EAAE,EACZ,IAAK,SAAS,CAAG,IAAI,CAACC,SAAS,CAACR,GAAG,CAAC,CAAE,MACtC,IAAK,MAAM,CAAG,IAAI,CAACS,MAAM,CAACT,GAAG,CAAC,CAAE,MAAM,CAExC,CAAC,MAAMU,CAAC,CAAC,CACRL,OAAO,CAACC,GAAG,CAACI,CAAC,CAAC,CACf,CACD,CAAC,GAAAlB,GAAA,aAAAC,KAAA,CAED,SAAAe,UAAUR,GAAG,CAAC,CAAC,CAAC,GAAAR,GAAA,UAAAC,KAAA,CAEhB,SAAAgB,OAAOT,GAAG,CAAC,CAAC,CAAC,GAAAR,GAAA,cAAAC,KAAA,gBAAAkB,WAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAEb,SAAAC,QAAiBC,WAAW,SAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC3B,IAAI,CAACC,IAAI,CAAG,GAAI,CAAAlC,IAAI,EAAE,CAEtB,IAAI,CAACM,OAAO,CAAC,WAAW,CAAC,CAEzBsB,WAAW,CAAE,IAAI,CAAE,yBAAAG,QAAA,CAAAI,IAAA,MAAAR,OAAA,QACnB,YAAAS,WAAAC,EAAA,SAAAd,WAAA,CAAAe,KAAA,MAAAC,SAAA,UAAAH,UAAA,eAAAnC,OAAA,KAIF,cAAe,CAAAA,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}