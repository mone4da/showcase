{"ast":null,"code":"import _toConsumableArray from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import state from'./state';import Session from'./session';var max=function max(list){return list.reduce(function(max,a){return a>max?a:max;});};var Model=/*#__PURE__*/function(_Session){_inherits(Model,_Session);var _super=_createSuper(Model);function Model(initialized){var _this;_classCallCheck(this,Model);_this=_super.call(this);_this.state=state;_this.initialize(initialized);return _this;}_createClass(Model,[{key:\"onWelcome\",value:function onWelcome(msg){this.state.user.token=msg.data;console.log('welcome!!',this.state.user.token);this.notify(msg.timestamp,'token');}},{key:\"onData\",value:function onData(msg){var index=msg.channel;var data=this.state.system.data[index];this.state.system.data[index]=[msg.latency].concat(_toConsumableArray(data.slice(0,data.length-1)));this.notify(Date.now(),'data');}},{key:\"notify\",value:function notify(data,id){this.onUpdate&&this.onUpdate(data,id);}//methods\n},{key:\"update\",value:function update(data,id){switch(id){}}}]);return Model;}(Session);export default Model;","map":{"version":3,"names":["state","Session","max","list","reduce","a","Model","_Session","_inherits","_super","_createSuper","initialized","_this","_classCallCheck","call","initialize","_createClass","key","value","onWelcome","msg","user","token","data","console","log","notify","timestamp","onData","index","channel","system","latency","concat","_toConsumableArray","slice","length","Date","now","id","onUpdate","update"],"sources":["/home/samuel/experiment/latency/frontend/src/model/index.js"],"sourcesContent":["import state from './state'\nimport Session from './session'\n\nconst max = list => list.reduce((max,a) => a > max ? a : max)\n\nclass Model extends Session{\n\tconstructor( initialized ){\n\t\tsuper()\n\t\tthis.state = state\n\n\t\tthis.initialize( initialized )\n\t}\n\n\tonWelcome(msg){\n\t\tthis.state.user.token = msg.data\n\t\tconsole.log('welcome!!', this.state.user.token)\n\t\tthis.notify(msg.timestamp, 'token')\n\t}\n\n\tonData(msg){\n\t\tlet index = msg.channel\n\n\t\tlet data = this.state.system.data[index]\n\t\tthis.state.system.data[index] = [msg.latency,...data.slice(0,data.length-1)]\n\n\t\tthis.notify(Date.now(), 'data')\n\t}\n\n\tnotify(data, id){\n\t\tthis.onUpdate && this.onUpdate(data, id)\n\t}\n\n\t//methods\n\tupdate(data, id){\n\t\tswitch(id){\n\t \t}\n\t}\n\n}\n\nexport default Model\n"],"mappings":"8mBAAA,MAAO,CAAAA,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAE/B,GAAM,CAAAC,GAAG,CAAG,QAAN,CAAAA,GAAGA,CAAGC,IAAI,QAAI,CAAAA,IAAI,CAACC,MAAM,CAAC,SAACF,GAAG,CAACG,CAAC,QAAK,CAAAA,CAAC,CAAGH,GAAG,CAAGG,CAAC,CAAGH,GAAG,GAAC,MAEvD,CAAAI,KAAK,uBAAAC,QAAA,EAAAC,SAAA,CAAAF,KAAA,CAAAC,QAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,KAAA,EACV,SAAAA,MAAaK,WAAW,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,KAAA,EACzBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,OACAF,KAAA,CAAKZ,KAAK,CAAGA,KAAK,CAElBY,KAAA,CAAKG,UAAU,CAAEJ,WAAW,CAAE,QAAAC,KAAA,CAC/B,CAACI,YAAA,CAAAV,KAAA,GAAAW,GAAA,aAAAC,KAAA,CAED,SAAAC,UAAUC,GAAG,CAAC,CACb,IAAI,CAACpB,KAAK,CAACqB,IAAI,CAACC,KAAK,CAAGF,GAAG,CAACG,IAAI,CAChCC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAE,IAAI,CAACzB,KAAK,CAACqB,IAAI,CAACC,KAAK,CAAC,CAC/C,IAAI,CAACI,MAAM,CAACN,GAAG,CAACO,SAAS,CAAE,OAAO,CAAC,CACpC,CAAC,GAAAV,GAAA,UAAAC,KAAA,CAED,SAAAU,OAAOR,GAAG,CAAC,CACV,GAAI,CAAAS,KAAK,CAAGT,GAAG,CAACU,OAAO,CAEvB,GAAI,CAAAP,IAAI,CAAG,IAAI,CAACvB,KAAK,CAAC+B,MAAM,CAACR,IAAI,CAACM,KAAK,CAAC,CACxC,IAAI,CAAC7B,KAAK,CAAC+B,MAAM,CAACR,IAAI,CAACM,KAAK,CAAC,EAAIT,GAAG,CAACY,OAAO,EAAAC,MAAA,CAAAC,kBAAA,CAAIX,IAAI,CAACY,KAAK,CAAC,CAAC,CAACZ,IAAI,CAACa,MAAM,CAAC,CAAC,CAAC,EAAC,CAE5E,IAAI,CAACV,MAAM,CAACW,IAAI,CAACC,GAAG,EAAE,CAAE,MAAM,CAAC,CAChC,CAAC,GAAArB,GAAA,UAAAC,KAAA,CAED,SAAAQ,OAAOH,IAAI,CAAEgB,EAAE,CAAC,CACf,IAAI,CAACC,QAAQ,EAAI,IAAI,CAACA,QAAQ,CAACjB,IAAI,CAAEgB,EAAE,CAAC,CACzC,CAEA;AAAA,GAAAtB,GAAA,UAAAC,KAAA,CACA,SAAAuB,OAAOlB,IAAI,CAAEgB,EAAE,CAAC,CACf,OAAOA,EAAE,GAEV,CAAC,WAAAjC,KAAA,GA/BkBL,OAAO,EAmC3B,cAAe,CAAAK,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}