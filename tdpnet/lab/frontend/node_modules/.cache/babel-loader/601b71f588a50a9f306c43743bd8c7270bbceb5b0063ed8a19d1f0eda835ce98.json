{"ast":null,"code":"import _objectSpread from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/samuel/experiment/latency/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import state from'./state';import Session from'./session';var Model=/*#__PURE__*/function(_Session){_inherits(Model,_Session);var _super=_createSuper(Model);function Model(initialized){var _this;_classCallCheck(this,Model);_this=_super.call(this);_this.state=state;_this.initialize(initialized);return _this;}_createClass(Model,[{key:\"onWelcome\",value:function onWelcome(msg){this.state.user.token=msg.data;console.log('welcome!!',this.state.user.token);this.notify(msg.timestamp,'token');this.enter(this.state.user.token,this.state.user.player);}},{key:\"onChange\",value:function onChange(msg){var data=JSON.stringify(msg.data);console.log('change',data);}},{key:\"onEnter\",value:function onEnter(msg){console.log('enter',msg);}},{key:\"notify\",value:function notify(data,id){this.onUpdate&&this.onUpdate(data,id);}//methods\n},{key:\"update\",value:function update(data,id){switch(id){case'move':this.handleMove(data);break;case'exit':this.handleExit(data);break;case'fire':this.handleFire(data);break;}}},{key:\"handleFire\",value:function handleFire(info){if(info<this.state.system.setting.max.amos){this.fire(this.state.user.token,info);}}},{key:\"handleMove\",value:function handleMove(data){this.move(this.state.user.token,_objectSpread(_objectSpread({},data),{},{material:this.state.user.player.material}));}},{key:\"handleExit\",value:function handleExit(data){this.exit(this.state.user.token,data);}}]);return Model;}(Session);export default Model;","map":{"version":3,"names":["state","Session","Model","_Session","_inherits","_super","_createSuper","initialized","_this","_classCallCheck","call","initialize","_createClass","key","value","onWelcome","msg","user","token","data","console","log","notify","timestamp","enter","player","onChange","JSON","stringify","onEnter","id","onUpdate","update","handleMove","handleExit","handleFire","info","system","setting","max","amos","fire","move","_objectSpread","material","exit"],"sources":["/home/samuel/experiment/latency/frontend/src/model/index.js"],"sourcesContent":["import state from './state'\nimport Session from './session'\n\nclass Model extends Session{\n\tconstructor( initialized ){\n\t\tsuper()\n\t\tthis.state = state\n\n\t\tthis.initialize( initialized )\n\t}\n\n\tonWelcome(msg){\n\t\tthis.state.user.token = msg.data\n\t\tconsole.log('welcome!!', this.state.user.token)\n\t\tthis.notify(msg.timestamp, 'token')\n\n\t\tthis.enter(this.state.user.token, this.state.user.player)\n\t}\n\n\tonChange(msg){\n\t\tlet data = JSON.stringify(msg.data)\n\t\tconsole.log('change', data)\n\t}\n\n\tonEnter (msg){\n\t\tconsole.log('enter', msg)\n\t}\n\n\n\tnotify(data, id){\n\t\tthis.onUpdate && this.onUpdate(data, id)\n\t}\n\n\t//methods\n\tupdate(data, id){\n\t\tswitch(id){\n\t\t\tcase 'move' :  this.handleMove(data); break;\n\t\t\tcase 'exit' : this.handleExit(data); break;\n\t\t\tcase 'fire' : this.handleFire(data); break;\n\t \t}\n\t}\n\n\thandleFire(info){\n\t\tif (info < this.state.system.setting.max.amos){\n\t\t\tthis.fire(this.state.user.token, info)\n\t\t}\n\t}\n\n\thandleMove(data){\n\t\tthis.move(this.state.user.token, {...data, material: this.state.user.player.material})\n\t}\n\n\thandleExit(data){\n\t\tthis.exit(this.state.user.token, data)\n\t}\n}\n\nexport default Model\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}