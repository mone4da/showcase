{"ast":null,"code":"import _slicedToArray from\"/home/samuel/dev/blackscreen/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import AppRoom from'./approom';import ComponentRoom from'./componentroom';import Studio from'./studio';import Cli from'./cli';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var availableTypes=['app','component','studio','cli'];var defaultPosition={x:200,y:200};var renderApp=function renderApp(name,Component,asset,offset,onFocused,onDragged,onClose){switch(name){case'app':return/*#__PURE__*/_jsx(AppRoom,{Component:Component,asset:asset.approom,offset:offset,onFocused:onFocused,onDragged:onDragged,onClose:onClose});case'component':return/*#__PURE__*/_jsx(ComponentRoom,{Component:Component,asset:asset.componentroom,offset:offset,onFocused:onFocused,onDragged:onDragged,onClose:onClose});case'studio':return/*#__PURE__*/_jsx(Studio,{Component:Component,asset:asset.studio,offset:offset,onFocused:onFocused,onDragged:onDragged,onClose:onClose});case'cli':return/*#__PURE__*/_jsx(Cli,{Component:Component,asset:asset.cli,offset:offset,onFocused:onFocused,onDragged:onDragged,onClose:onClose});}return null;};var AppManager=function AppManager(props){var types=props.types,Component=props.Component,state=props.state,asset=props.asset,style=props.style,onUpdate=props.onUpdate,event=props.event,onFocused=props.onFocused,onClose=props.onClose;var _useState=useState(Object.fromEntries(availableTypes.map(function(type){return[type,defaultPosition];}))),_useState2=_slicedToArray(_useState,2),positions=_useState2[0],setPositions=_useState2[1];var handleFocused=function handleFocused(id,offset){onFocused&&onFocused(id,offset);};var handleDragged=function handleDragged(id,offset){setPositions(function(positions){positions[id]=offset;return positions;});};var handleClose=function handleClose(id){setPositions(function(positions){positions[id]=defaultPosition;return positions;});onClose&&onClose(id);};return/*#__PURE__*/_jsx(_Fragment,{children:types.map(function(id){return renderApp(id,Component,asset,positions[id],function(){return handleFocused(id);},function(offset){return handleDragged(id,offset);},function(){return handleClose(id);});})});};export default AppManager;","map":{"version":3,"names":["useState","AppRoom","ComponentRoom","Studio","Cli","jsx","_jsx","Fragment","_Fragment","availableTypes","defaultPosition","x","y","renderApp","name","Component","asset","offset","onFocused","onDragged","onClose","approom","componentroom","studio","cli","AppManager","props","types","state","style","onUpdate","event","_useState","Object","fromEntries","map","type","_useState2","_slicedToArray","positions","setPositions","handleFocused","id","handleDragged","handleClose","children"],"sources":["/home/samuel/dev/blackscreen/frontend/src/view/appmanager.js"],"sourcesContent":["import {useState} from 'react'\nimport AppRoom from './approom'\nimport ComponentRoom from './componentroom'\nimport Studio from './studio'\nimport Cli from './cli'\n\nconst availableTypes = ['app','component','studio','cli']\n\nconst defaultPosition = {x: 200, y: 200}\n\nlet renderApp = (name, Component, asset, offset, onFocused, onDragged, onClose) => {\n\tswitch(name){\n\t\tcase 'app' : return  <AppRoom Component={Component} asset = {asset.approom} offset={offset} onFocused={onFocused} onDragged={onDragged} onClose={onClose} />\n\t\tcase 'component' : return<ComponentRoom Component={Component} asset = {asset.componentroom}  offset={offset} onFocused={onFocused} onDragged={onDragged} onClose={onClose}/>\n\t\tcase 'studio' : return <Studio Component={Component} asset = {asset.studio}  offset={offset}  onFocused={onFocused} onDragged={onDragged} onClose={onClose}/>\n\t\tcase 'cli' : return <Cli Component={Component} asset = {asset.cli}  offset={offset}  onFocused={onFocused} onDragged={onDragged} onClose={onClose}/>\n\t}\n\n\treturn null\n}\n\nlet AppManager = props => {\n\tlet {\n\t\ttypes,\n\t\tComponent,\n\t\tstate,\n\t\tasset,\n\t\tstyle,\n\t\tonUpdate,\n\t\tevent,\n\t\tonFocused,\n\t\tonClose} = props\n\n\tlet [positions, setPositions] = useState( Object.fromEntries( availableTypes.map(type => [type, defaultPosition]) ) )\n\n\n\tlet handleFocused = (id, offset) => {\n\t\tonFocused && onFocused(id, offset)\n\t}\n\n\tlet handleDragged = (id, offset) => {\n\t\tsetPositions( positions => {\n\t\t\tpositions[id] = offset\n\t\t\treturn positions\n\t\t})\n\t}\n\n\tlet handleClose = id => {\n\n\t\tsetPositions( positions => {\n\t\t\tpositions[id] = defaultPosition\n\t\t\treturn positions\n\t\t})\n\n\t\tonClose && onClose(id)\n\t}\n\n\n\treturn <>{types.map(id => renderApp(\n\t\t\t\t\tid,\n\t\t\t\t\tComponent,\n\t\t\t\t\tasset,\n\t\t\t\t\tpositions[id],\n\t\t\t\t\t() => handleFocused(id),\n\t\t\t\t\toffset => handleDragged(id, offset),\n\t\t\t\t\t() => handleClose(id)\n\t\t\t\t)\n\t\t\t)}</>\n\n}\n\nexport default  AppManager\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}