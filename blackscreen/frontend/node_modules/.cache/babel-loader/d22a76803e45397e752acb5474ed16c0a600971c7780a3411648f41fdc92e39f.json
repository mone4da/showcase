{"ast":null,"code":"import _regeneratorRuntime from\"/home/samuel/dev/blackscreen/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/samuel/dev/blackscreen/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/samuel/dev/blackscreen/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samuel/dev/blackscreen/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import Session from'./session';import Rest from'./rest';var Model=/*#__PURE__*/function(){function Model(initialized){_classCallCheck(this,Model);this.state={system:{},user:{}};this.initialize(initialized);}_createClass(Model,[{key:\"initialize\",value:function(){var _initialize=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(initialized){var _this=this;var config;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:this.rest=new Rest();_context.next=3;return this.loadConfig();case 3:config=_context.sent;this.state.ok=config.ok;if(this.state.ok){this.state.system.region=config.data.region;this.state.system.copyright=config.data.copyright;this.state.user.apps=config.data.apps;this.session=new Session(function(data){return _this.onUpdate&&_this.onUpdate(data,'session');});}initialized(this);case 7:case\"end\":return _context.stop();}},_callee,this);}));function initialize(_x){return _initialize.apply(this,arguments);}return initialize;}()},{key:\"loadConfig\",value:function(){var _loadConfig=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.rest.config();case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2,this);}));function loadConfig(){return _loadConfig.apply(this,arguments);}return loadConfig;}()}]);return Model;}();export default Model;","map":{"version":3,"names":["Session","Rest","Model","initialized","_classCallCheck","state","system","user","initialize","_createClass","key","value","_initialize","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this","config","wrap","_callee$","_context","prev","next","rest","loadConfig","sent","ok","region","data","copyright","apps","session","onUpdate","stop","_x","apply","arguments","_loadConfig","_callee2","_callee2$","_context2","abrupt"],"sources":["/home/samuel/dev/blackscreen/frontend/src/model/index.js"],"sourcesContent":["import Session from './session'\nimport Rest from './rest'\n\nclass Model{\n\tconstructor( initialized ){\n\t\tthis.state = {\n\t\t\tsystem: {},\n\t\t\tuser: {}\n\t\t}\n\t\tthis.initialize( initialized )\n\t}\n\n\tasync initialize( initialized ){\n\t\tthis.rest = new Rest()\n\t\tlet config = await this.loadConfig()\n\n\t\tthis.state.ok = config.ok\n\n\n\t\tif (this.state.ok){\n\t\t\tthis.state.system.region = config.data.region\n\t\t\tthis.state.system.copyright = config.data.copyright\n\n\t\t\tthis.state.user.apps = config.data.apps\n\n\t\t\tthis.session = new Session( data => this.onUpdate && this.onUpdate(data, 'session') )\n\t\t}\n\n\n\t\tinitialized( this )\n\t}\n\n\tasync loadConfig(){\n\t\treturn await this.rest.config()\n\t}\n}\n\nexport default Model\n"],"mappings":"0fAAA,MAAO,CAAAA,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,IAAI,KAAM,QAAQ,IAEnB,CAAAC,KAAK,yBACV,SAAAA,MAAaC,WAAW,CAAE,CAAAC,eAAA,MAAAF,KAAA,EACzB,IAAI,CAACG,KAAK,CAAG,CACZC,MAAM,CAAE,CAAC,CAAC,CACVC,IAAI,CAAE,CAAC,CACR,CAAC,CACD,IAAI,CAACC,UAAU,CAAEL,WAAW,CAAE,CAC/B,CAACM,YAAA,CAAAP,KAAA,GAAAQ,GAAA,cAAAC,KAAA,gBAAAC,WAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAC,QAAkBb,WAAW,MAAAc,KAAA,UAAAC,MAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC5B,IAAI,CAACC,IAAI,CAAG,GAAI,CAAAvB,IAAI,EAAE,CAAAoB,QAAA,CAAAE,IAAA,SACH,KAAI,CAACE,UAAU,EAAE,QAAhCP,MAAM,CAAAG,QAAA,CAAAK,IAAA,CAEV,IAAI,CAACrB,KAAK,CAACsB,EAAE,CAAGT,MAAM,CAACS,EAAE,CAGzB,GAAI,IAAI,CAACtB,KAAK,CAACsB,EAAE,CAAC,CACjB,IAAI,CAACtB,KAAK,CAACC,MAAM,CAACsB,MAAM,CAAGV,MAAM,CAACW,IAAI,CAACD,MAAM,CAC7C,IAAI,CAACvB,KAAK,CAACC,MAAM,CAACwB,SAAS,CAAGZ,MAAM,CAACW,IAAI,CAACC,SAAS,CAEnD,IAAI,CAACzB,KAAK,CAACE,IAAI,CAACwB,IAAI,CAAGb,MAAM,CAACW,IAAI,CAACE,IAAI,CAEvC,IAAI,CAACC,OAAO,CAAG,GAAI,CAAAhC,OAAO,CAAE,SAAA6B,IAAI,QAAI,CAAAZ,KAAI,CAACgB,QAAQ,EAAIhB,KAAI,CAACgB,QAAQ,CAACJ,IAAI,CAAE,SAAS,CAAC,GAAE,CACtF,CAGA1B,WAAW,CAAE,IAAI,CAAE,yBAAAkB,QAAA,CAAAa,IAAA,MAAAlB,OAAA,QACnB,YAAAR,WAAA2B,EAAA,SAAAvB,WAAA,CAAAwB,KAAA,MAAAC,SAAA,UAAA7B,UAAA,OAAAE,GAAA,cAAAC,KAAA,gBAAA2B,WAAA,CAAAzB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAwB,SAAA,SAAAzB,mBAAA,GAAAK,IAAA,UAAAqB,UAAAC,SAAA,iBAAAA,SAAA,CAAAnB,IAAA,CAAAmB,SAAA,CAAAlB,IAAA,SAAAkB,SAAA,CAAAlB,IAAA,SACc,KAAI,CAACC,IAAI,CAACN,MAAM,EAAE,eAAAuB,SAAA,CAAAC,MAAA,UAAAD,SAAA,CAAAf,IAAA,0BAAAe,SAAA,CAAAP,IAAA,MAAAK,QAAA,QAC/B,YAAAd,WAAA,SAAAa,WAAA,CAAAF,KAAA,MAAAC,SAAA,UAAAZ,UAAA,eAAAvB,KAAA,KAGF,cAAe,CAAAA,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}